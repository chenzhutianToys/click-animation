webpackJsonp([1],[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var a=i(46),r=n(a),o=i(110),s=n(o),c=i(107),l=n(c),h=i(45),u=n(h),d=i(108),f=n(d),p=i(109),m=n(p);r.default.use(s.default);var v=new s.default({root:"",history:!0,saveScrollPosition:!0});v.map({"/":{component:u.default},"/conglei":{component:f.default},"/no-foreshadow":{component:m.default}}),v.start(l.default,"#app")},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e,i){t.exports=!i(10)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){var n=i(13),a=i(37),r=i(27),o=Object.defineProperty;e.f=i(2)?Object.defineProperty:function(t,e,i){if(n(t),e=r(e,!0),n(i),a)try{return o(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){var n=i(68),a=i(18);t.exports=function(t){return n(a(t))}},function(t,e){var i=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=i)},function(t,e,i){var n=i(4),a=i(16);t.exports=i(2)?function(t,e,i){return n.f(t,e,a(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var n=i(25)("wks"),a=i(17),r=i(1).Symbol,o="function"==typeof r,s=t.exports=function(t){return n[t]||(n[t]=o&&r[t]||(o?r:a)("Symbol."+t))};s.store=n},function(t,e,i){t.exports={default:i(59),__esModule:!0}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,i){var n=i(42),a=i(19);t.exports=Object.keys||function(t){return n(t,a)}},,function(t,e,i){var n=i(15);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,i){var n=i(1),a=i(6),r=i(65),o=i(7),s="prototype",c=function(t,e,i){var l,h,u,d=t&c.F,f=t&c.G,p=t&c.S,m=t&c.P,v=t&c.B,g=t&c.W,y=f?a:a[e]||(a[e]={}),x=y[s],b=f?n:p?n[e]:(n[e]||{})[s];f&&(i=e);for(l in i)h=!d&&b&&void 0!==b[l],h&&l in y||(u=h?b[l]:i[l],y[l]=f&&"function"!=typeof b[l]?i[l]:v&&h?r(u,n):g&&b[l]==u?function(t){var e=function(e,i,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,n)}return t.apply(this,arguments)};return e[s]=t[s],e}(u):m&&"function"==typeof u?r(Function.call,u):u,m&&((y.virtual||(y.virtual={}))[l]=u,t&c.R&&x&&!x[l]&&o(x,l,u)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){t.exports={}},function(t,e){t.exports=!0},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,i){var n=i(4).f,a=i(3),r=i(8)("toStringTag");t.exports=function(t,e,i){t&&!a(t=i?t:t.prototype,r)&&n(t,r,{configurable:!0,value:e})}},function(t,e,i){var n=i(25)("keys"),a=i(17);t.exports=function(t){return n[t]||(n[t]=a(t))}},function(t,e,i){var n=i(1),a="__core-js_shared__",r=n[a]||(n[a]={});t.exports=function(t){return r[t]||(r[t]={})}},function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},function(t,e,i){var n=i(15);t.exports=function(t,e){if(!n(t))return t;var i,a;if(e&&"function"==typeof(i=t.toString)&&!n(a=i.call(t)))return a;if("function"==typeof(i=t.valueOf)&&!n(a=i.call(t)))return a;if(!e&&"function"==typeof(i=t.toString)&&!n(a=i.call(t)))return a;throw TypeError("Can't convert object to primitive value")}},function(t,e,i){var n=i(1),a=i(6),r=i(21),o=i(29),s=i(4).f;t.exports=function(t){var e=a.Symbol||(a.Symbol=r?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:o.f(t)})}},function(t,e,i){e.f=i(8)},,,function(t,e,i){var n,a,r={};i(92),n=i(49),a=i(102),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports.default);var o="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;a&&(o.template=a),o.computed||(o.computed={}),Object.keys(r).forEach(function(t){var e=r[t];o.computed[t]=function(){return e}})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(56),r=n(a),o=i(57),s=n(o),c=i(12),l=n(c),h=2*Math.PI,u=35,d=-1,f=function(){function t(e,i,n){(0,r.default)(this,t),this.backCanvas=e,this.frontCanvas=i,this.width=+this.backCanvas.attr("width"),this.height=+this.backCanvas.attr("height"),this.center=[.5*this.width,.5*this.helght],this.timeLineHeight=n,this.halfTimeLineHeight=.5*n,this.frontContext=this.frontCanvas.node().getContext("2d"),this.backContext=this.backCanvas.node().getContext("2d"),this.timeFormat=l.default.time.format("%b.%d,%H"),this.skewLinePerDot=20,this.circleRadius=u,this.dotRadius=2,this.distToSplit=30,this.dropBalls=!0,this._id=++d,this._timeLineData=null,this.testTick=0}return(0,s.default)(t,[{key:"DrawUsingCustom",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;this.backContext.clearRect(0,0,this.width,this.height),this.frontContext.clearRect(0,0,this.width,this.height);var r=l.default.transform(this.backCanvas.attr("transform")),o="number"==typeof i?i:0,s="number"==typeof n?n:0,c="number"==typeof a?a:1;this.backContext.save(),this.backContext.translate(o+r.translate[0],s+r.translate[1]),this.backContext.scale(c*r.scale[0],c*r.scale[1]),this.frontContext.save(),this.frontContext.translate(o+r.translate[0],s+r.translate[1]),this.frontContext.scale(c*r.scale[0],c*r.scale[1]);var h=t.apply(this,e);return this.backContext.restore(),this.frontContext.restore(),h}},{key:"DrawTimeLine",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,r=function(t,e,i,n,a){if(t&&Array.isArray(t)){var r=this._timeLineData||{},o=t[t.length-1];this.backContext.lineWidth=8,this.backContext.strokeStyle="rgb(73,75,87)",this.backContext.lineWidth=8,this.backContext.beginPath(),this.backContext.moveTo(0,this.halfTimeLineHeight),this.backContext.lineTo(o,this.halfTimeLineHeight),this.backContext.stroke();var s=this.NewAtomDrawCircles(e,i,n,a),c=s.circleLineWidth,h=l.default.max(e),u=l.default.max(t);return r.x=0,r.y=this.halfTimeLineHeight-this.circleRadius-c,r.width=this.width+2*c+u,r.height=2*(this.circleRadius+c)+h,r.dotsXPosition=t,r.dotsYPosition=e,this._timeLineData=r,s.splitBallsFinished}};return this.DrawUsingCustom(r,[t,e,i,n,a])}},{key:"setDistToSplit",value:function(t){return"number"==typeof t&&(this.distToSplit=t),this}},{key:"setDropBalls",value:function(t){return"boolean"==typeof t&&(this.dropBalls=t),this}},{key:"NewAtomDrawCircles",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=5,r=t.length;this.frontContext.lineWidth=5,this.frontContext.strokeStyle="rgb(73,75,87)",this.frontContext.fillStyle="rgb(204,110,76)",this.frontContext.beginPath();for(var o=0;o<r;++o)this.dropBalls&&!t[o].firstDrop||(this.frontContext.moveTo(t[o].x+this.circleRadius-(Array.isArray(e)?e[o]:e),this.halfTimeLineHeight+t[o].y+(Array.isArray(i)?i[o]:i)),this.frontContext.arc(t[o].x-(Array.isArray(e)?e[o]:e),this.halfTimeLineHeight+t[o].y+(Array.isArray(i)?i[o]:i),this.circleRadius,0,h));this.frontContext.fill(),this.frontContext.stroke(),this.frontContext.fillStyle="#fff",this.frontContext.font="25px Segoe UI Light",this.frontContext.textBaseline="middle",this.frontContext.textAlign="center",this.frontContext.beginPath();for(var s=0;s<r;++s)this.dropBalls&&!t[s].firstDrop||this.frontContext.fillText(this.timeFormat(new Date(t[s].ts)),t[s].x-(Array.isArray(e)?e[s]:e),this.halfTimeLineHeight+t[s].y+(Array.isArray(i)?i[s]:i));this.frontContext.fill();var c=!1;if(n){for(var l=0,u=0,d=n.length;u<d;++u){var f=n[u];this.frontContext.fillStyle=f.color,this.frontContext.beginPath(),this.frontContext.moveTo(f.x+f.r,this.halfTimeLineHeight+f.y),this.frontContext.arc(f.x,this.halfTimeLineHeight+f.y,f.r,0,h);var p=f.x+.9*(f.x-f.px);f.px=f.x,f.x=p,l+=Math.abs(f.px-f.x);var m=f.y+.9*(f.y-f.py);f.py=f.y,f.y=m,this.frontContext.fill()}this.testTick++,l<1*n.length&&(c=!0,console.log("tick time:"+this.testTick),this.testTick=0)}return{circleLineWidth:a,splitBallsFinished:c}}},{key:"AnimationInitTimeLine",value:function(t){var e=t.length,i=(t[t.length-1].x-t[0].x)/(e-1),n=1/e,a=(e*this.skewLinePerDot,i/this.skewLinePerDot,t[0].x,t[t.length-1].x,0),r=l.default.transform(this.backCanvas.attr("transform")),o=function(e){for(this.backContext.save(),this.frontContext.save(),this.backContext.translate(r.translate[0],r.translate[1]),this.frontContext.translate(r.translate[0],r.translate[1]);e>a*n;)t[a].empty?++a:(this.frontContext.lineWidth=5,this.frontContext.strokeStyle="rgb(73,75,87)",this.frontContext.fillStyle="rgb(204,110,76)",this.frontContext.beginPath(),this.frontContext.moveTo(t[a].x+this.circleRadius,this.halfTimeLineHeight),this.frontContext.arc(t[a].x,this.halfTimeLineHeight,this.circleRadius,0,h),this.frontContext.fill(),this.frontContext.stroke(),this.frontContext.fillStyle="#fff",this.frontContext.font="28px Segoe UI Light",this.frontContext.textBaseline="middle",this.frontContext.textAlign="center",this.frontContext.beginPath(),this.frontContext.fillText(this.timeFormat(t[a].ts),t[a].x,this.halfTimeLineHeight),this.frontContext.fill(),++a);var i=this.width*e;this.backContext.lineWidth=8,this.backContext.strokeStyle="rgb(73,75,87)",this.backContext.lineWidth=8,this.backContext.beginPath(),this.backContext.moveTo(0,this.halfTimeLineHeight),this.backContext.lineTo(i,this.halfTimeLineHeight),this.backContext.stroke(),this.backContext.restore(),this.frontContext.restore()};return o.bind(this)}},{key:"AnimationAggregateCircles",value:function(t,e,i){var n=this,a=l.default.transform(this.backCanvas.attr("transform")),r=u*i,o=void 0,s=void 0;t[1]&&e[1]&&(o=t[1].ts-t[0].ts,s=e[1].ts-e[0].ts);var c=void 0,d=void 0;o>s?(c=e,d=t):(c=t,d=e);for(var f=0,p=c.length;f<p;++f){for(var m=c[f],v=-1;d[++v]&&d[v].ts<m.ts;);--v<0&&(v=0),o>s?m.aggregate={sx:d[v].x,ex:m.x}:m.aggregate={sx:m.x,ex:d[v].x}}var g=function(t){n.frontContext.clearRect(0,.2*n.height,n.width,.8*n.height),n.frontContext.save(),n.frontContext.translate(a.translate[0],a.translate[1]),n.frontContext.scale(a.scale[0],a.scale[1]);var e=c.length;n.frontContext.lineWidth=5,n.frontContext.strokeStyle="rgb(73,75,87)",n.frontContext.fillStyle="rgb(204,110,76)",n.frontContext.beginPath();for(var i=0;i<e;++i){var o=c[i];o.firstDrop&&(n.frontContext.moveTo(o.aggregate.sx+(o.aggregate.ex-o.aggregate.sx)*t+n.circleRadius+(r-n.circleRadius)*t,n.halfTimeLineHeight+o.y),n.frontContext.arc(o.aggregate.sx+(o.aggregate.ex-o.aggregate.sx)*t,n.halfTimeLineHeight,n.circleRadius+(r-n.circleRadius)*t,0,h))}n.frontContext.fill(),n.frontContext.stroke(),n.frontContext.fillStyle="#fff",n.frontContext.font="28px Segoe UI Light",n.frontContext.textBaseline="middle",n.frontContext.textAlign="center",n.frontContext.beginPath();for(var s=0;s<e;++s){var l=c[s];l.firstDrop&&n.frontContext.fillText(n.timeFormat(new Date(l.ts)),l.aggregate.sx+(l.aggregate.ex-l.aggregate.sx)*t,n.halfTimeLineHeight+l.y)}n.frontContext.fill(),1===t&&(n.circleRadius=r),n.frontContext.restore()};return g.bind(this)}},{key:"AtomDrawSkewLines",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.backContext.strokeStyle="#D90429",this.backContext.fillStyle="#D90429",this.backContext.lineWidth=.5,this.backContext.beginPath();for(var a=0;a<e;++a){var r=t[0]+a*i;this.backContext.moveTo(r+i-n,this.halfTimeLineHeight),this.backContext.lineTo(r-n,this.timeLineHeight),0==(3&a)&&(this.backContext.moveTo(r+i-n,this.halfTimeLineHeight),this.backContext.arc(r+i-n,this.halfTimeLineHeight,this.dotRadius,0,h))}this.backContext.fill(),this.backContext.stroke()}},{key:"AtomDrawCircles",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=5,r=t.length;this.frontContext.lineWidth=a,this.frontContext.strokeStyle="rgb(221, 196, 207)",this.frontContext.fillStyle="rgb(233,243,246)",this.frontContext.beginPath();for(var o=0;o<r;++o)t[o].firstDrop&&(this.frontContext.moveTo(t[o].x+this.circleRadius-(Array.isArray(e)?e[o]:e),this.halfTimeLineHeight+t[o].y+(Array.isArray(i)?i[o]:i)),this.frontContext.arc(t[o].x-(Array.isArray(e)?e[o]:e),this.halfTimeLineHeight+t[o].y+(Array.isArray(i)?i[o]:i),this.circleRadius,0,h));this.frontContext.fill(),this.frontContext.stroke(),this.frontContext.fillStyle="#D90429",this.frontContext.font="28px Arial Black",this.frontContext.textBaseline="middle",this.frontContext.textAlign="center",this.frontContext.beginPath();for(var s=0;s<r;++s)t[s].firstDrop&&this.frontContext.fillText(this.timeFormat(new Date(t[s].ts)),t[s].x-(Array.isArray(e)?e[s]:e),this.halfTimeLineHeight+t[s].y+(Array.isArray(i)?i[s]:i));this.frontContext.fill();var c=!1;if(n){for(var l=0,u=0,d=n.length;u<d;++u){var f=n[u];this.frontContext.fillStyle=f.color,this.frontContext.beginPath(),this.frontContext.moveTo(f.x+f.r,this.halfTimeLineHeight+f.y),this.frontContext.arc(f.x,this.halfTimeLineHeight+f.y,f.r,0,h);var p=f.x+.9*(f.x-f.px);f.px=f.x,f.x=p,l+=Math.abs(f.px-f.x);var m=f.y+.9*(f.y-f.py);f.py=f.y,f.y=m,this.frontContext.fill()}this.testTick++,l<1*n.length&&(c=!0,console.log("tick time:"+this.testTick),this.testTick=0)}return{circleLineWidth:a,splitBallsFinished:c}}},{key:"AtomDrawLinks",value:function(t){var e=t[t.length-1];this.backContext.lineWidth=1,this.backContext.strokeStyle="rgb(221, 196, 207)",this.backContext.beginPath(),this.backContext.moveTo(0,0),this.backContext.lineTo(e,0),this.backContext.moveTo(0,this.timeLineHeight),this.backContext.lineTo(e,this.timeLineHeight),this.backContext.stroke()}},{key:"GetDotsYPosition",value:function(){return this._timeLineData&&this._timeLineData.dotsYPosition}},{key:"ClearCanvas",value:function(){this.circleRadius=u,this.backContext.clearRect(0,0,this.width,this.height),this.frontContext.clearRect(0,0,this.width,this.height),this.backContext.setTransform(1,0,0,1,0,0),this.frontContext.setTransform(1,0,0,1,0,0)}}]),t}();e.default=f},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var a=i(55),r=n(a),o=i(54),s=n(o),c="function"==typeof s.default&&"symbol"==typeof r.default?function(t){return typeof t}:function(t){return t&&"function"==typeof s.default&&t.constructor===s.default&&t!==s.default.prototype?"symbol":typeof t};e.default="function"==typeof s.default&&"symbol"===c(r.default)?function(t){return"undefined"==typeof t?"undefined":c(t)}:function(t){return t&&"function"==typeof s.default&&t.constructor===s.default&&t!==s.default.prototype?"symbol":"undefined"==typeof t?"undefined":c(t)}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e,i){var n=i(15),a=i(1).document,r=n(a)&&n(a.createElement);t.exports=function(t){return r?a.createElement(t):{}}},function(t,e,i){t.exports=!i(2)&&!i(10)(function(){return 7!=Object.defineProperty(i(36)("div"),"a",{get:function(){return 7}}).a})},function(t,e,i){"use strict";var n=i(21),a=i(14),r=i(43),o=i(7),s=i(3),c=i(20),l=i(70),h=i(23),u=i(77),d=i(8)("iterator"),f=!([].keys&&"next"in[].keys()),p="@@iterator",m="keys",v="values",g=function(){return this};t.exports=function(t,e,i,y,x,b,k){l(i,e,y);var w,T,C,D=function(t){if(!f&&t in L)return L[t];switch(t){case m:return function(){return new i(this,t)};case v:return function(){return new i(this,t)}}return function(){return new i(this,t)}},A=e+" Iterator",S=x==v,_=!1,L=t.prototype,M=L[d]||L[p]||x&&L[x],G=M||D(x),H=x?S?D("entries"):G:void 0,I="Array"==e?L.entries||M:M;if(I&&(C=u(I.call(new t)),C!==Object.prototype&&(h(C,A,!0),n||s(C,d)||o(C,d,g))),S&&M&&M.name!==v&&(_=!0,G=function(){return M.call(this)}),n&&!k||!f&&!_&&L[d]||o(L,d,G),c[e]=G,c[A]=g,x)if(w={values:S?G:D(v),keys:b?G:D(m),entries:H},k)for(T in w)T in L||r(L,T,w[T]);else a(a.P+a.F*(f||_),e,w);return w}},function(t,e,i){var n=i(13),a=i(74),r=i(19),o=i(24)("IE_PROTO"),s=function(){},c="prototype",l=function(){var t,e=i(36)("iframe"),n=r.length,a="<",o=">";for(e.style.display="none",i(67).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(a+"script"+o+"document.F=Object"+a+"/script"+o),t.close(),l=t.F;n--;)delete l[c][r[n]];return l()};t.exports=Object.create||function(t,e){var i;return null!==t?(s[c]=n(t),i=new s,s[c]=null,i[o]=t):i=l(),void 0===e?i:a(i,e)}},function(t,e,i){var n=i(42),a=i(19).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,a)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){var n=i(3),a=i(5),r=i(64)(!1),o=i(24)("IE_PROTO");t.exports=function(t,e){var i,s=a(t),c=0,l=[];for(i in s)i!=o&&n(s,i)&&l.push(i);for(;e.length>c;)n(s,i=e[c++])&&(~r(l,i)||l.push(i));return l}},function(t,e,i){t.exports=i(7)},function(t,e,i){var n=i(18);t.exports=function(t){return Object(n(t))}},function(t,e,i){var n,a,r={};i(94),i(98),n=i(51),a=i(105),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports.default);var o="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;a&&(o.template=a),o.computed||(o.computed={}),Object.keys(r).forEach(function(t){var e=r[t];o.computed[t]=function(){return e}})},,function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(34),r=n(a),o=i(9),s=n(o);e.default=function(t){function e(t,e,i){var n=e.x-t.x,a=n*n,r=t.r+e.r;if(r*=r,!(a>r)){var o=e.y-t.y;if(a+=o*o,a<=r){var s=Math.sqrt(a);if(r=t.r+e.r,i)var c=t.x-t.px,l=t.y-t.py,h=e.x-e.px,u=e.y-e.py;var d=0!=s?s-r:t.r,f=d/s-.01;f=f<0?f:0;var p=.5*f*.2,m=p*n,v=p*o;if(t.x=t.active?t.x+m:t.x,t.y=t.active?t.y+v:t.y+v,e.x=e.active?e.x-m:e.x,e.y=e.active?e.y-v:e.y-v,i){var g=n*(h-c)+o*(u-l);if(g<0){var y=(1+.5*(t.restitution+e.restitution))*g*.5/a;c+=y*n,l+=y*o,h-=y*n,u-=y*o,t.px=t.active?t.x-c:t.x,t.py=t.active?t.y-l:t.y-l,e.px=e.active?e.x-h:e.x,e.py=e.active?e.y-u:e.y-u}}}}}function i(t){for(var i=void 0,n=void 0,a=0,r=u.length;a<r;++a)if(i=u[a],!i.fixed)for(var o=a+1;o<r;++o)n=u[o],i!==n&&n.boundary===i.boundary&&e(i,n,t)}function n(t){if(!t.fixed){var e=t.r,i=t.x,n=t.y,a=t.firstPass,r=v&&p[t.boundary].values;i<f[0][0]+e?t.x=f[0][0]+e:i>f[1][0]-e?t.x=f[1][0]-e:i<r[0][0]+e?t.x=r[0][0]+e:i>r[1][0]-e&&(t.x=r[1][0]-e),n<f[0][1]+e?t.y=f[0][1]+e:n>f[1][1]-e?t.y=f[1][1]-e:T.y>=0?n>r[1][1]-e?t.y=r[1][1]-e:n<r[0][1]+e&&a?t.y=r[0][1]+e:n>r[0][1]+e&&!a&&(t.firstPass=!0):T.y<0&&(n<r[0][1]+e?t.y=r[0][1]+e:n>r[1][1]-e&&a?t.y=r[1][1]-e:n<r[1][1]-e&&!a&&(t.firstPass=!0))}}function a(t){if(!t.fixed){var e=t.r,i=t.x,n=t.y,a=t.restitution,r=(t.px-t.x)*a,o=(t.py-t.y)*a,s=t.firstPass,c=v&&p[t.boundary].values;i<f[0][0]+e?(t.x=f[0][0]+e,t.px=t.active?t.x-r:t.x):i>f[1][0]-e?(t.x=f[1][0]-e,t.px=t.active?t.x-r:t.x):i<c[0][0]+e?(t.x=c[0][0]+e,t.px=t.active?t.x-r:t.x):i>c[1][0]-e&&(t.x=c[1][0]-e,t.px=t.active?t.x-r:t.x),n<f[0][1]+e?(t.y=f[0][1]+e,t.py=t.active?t.y-o:t.y):n>f[1][1]-e?(t.y=f[1][1]-e,t.py=t.active?t.y-o:t.y):T.y>=0?n>c[1][1]-e?(t.y=c[1][1]-e,t.px=t.active?t.x-r:t.x):n<c[0][1]+e&&s?(t.y=c[0][1]+e,t.px=t.active?t.x-r:t.x):n>c[0][1]+e&&!s&&(t.firstPass=!0):T.y<0&&(n<c[0][1]+e?(t.y=c[0][1]+e,t.px=t.active?t.x-r:t.x):n>c[1][1]-e&&s?(t.y=c[1][1]-e,t.px=t.active?t.x-r:t.x):n<c[1][1]-e&&!s&&(t.firstPass=!0))}}function o(t){if(!t.fixed){var e=t.r,i=t.x,n=t.y,a=t.firstPass,r=!1,o=v&&(0,s.default)(p),c=v&&o[o.indexOf(t.boundary)-1],l=v&&p[c]&&p[c].values,h=v&&p[t.boundary].values,u=l?l[Math.round(t.x)]+e:f[0][1],d=h?h[Math.round(t.x)]-e:f[1][1];return v||(u=.85*f[1][1]),i<f[0][0]+e?t.x=f[0][0]+e:i>f[1][0]-e&&(t.x=f[1][0]-e),n<f[0][1]+e?t.y=f[0][1]+e:n>f[1][1]-e?t.y=f[1][1]-e:T.y>=0?n>d?t.y=d:n<u&&a?(t.y=u,t.py=t.y-e):n+e>u-e&&!a&&(t.firstPass=!0,r=!0):T.y<0&&(n<u?t.y=u:n>d&&a?(t.y=d,t.py=t.y+e):n-e<d+e&&!a&&(t.firstPass=!0,r=!0)),r}}function c(t){if(!t.fixed){var e=t.r,i=t.x,n=t.y,a=t.restitution,r=(t.px-t.x)*a,o=(t.py-t.y)*a,c=t.firstPass,l=!1,h=v&&(0,s.default)(p),u=v&&h[h.indexOf(t.boundary)-1],d=v&&p[u]&&p[u].values,m=v&&p[t.boundary].values,g=d?d[Math.round(t.x)]+e:f[0][1],y=m?m[Math.round(t.x)]-e:f[1][1];return v||(g=.85*f[1][1]),i<f[0][0]+e?(t.x=f[0][0]+e,t.px=t.active?t.x-r:t.x):i>f[1][0]-e&&(t.x=f[1][0]-e,t.px=t.active?t.x-r:t.x),n<f[0][1]+e?(t.y=f[0][1]+e,t.py=t.active?t.y-o:t.y):n>f[1][1]-e?(t.y=f[1][1]-e,t.py=t.active?t.y-o:t.y):T.y>=0?n>y?(t.y=y,t.px=t.active?t.x-r:t.x):n<g&&c?(t.y=g,t.py=t.y-e,t.px=t.active?t.x-r:t.x):n+e>g-e&&!c&&(t.firstPass=!0,l=!0):T.y<0&&(n<g?(t.y=g,t.px=t.active?t.x-r:t.x):n>y&&c?(t.y=y,t.py=t.y+e,t.px=t.active?t.x-r:t.x):n-e<y+e&&!c&&(t.firstPass=!0,l=!0)),l}}var l={},h=-1,u=t,d=2,f=[[0,0],[600,800]],p=null,m=!1,v=!1,g=[],y=void 0,x=void 0,b=.05,k=2,w=10,T=null,C=null,D=null,A=!1,S=[],_={tick:function(){},sed:function(){},end:function(){}},L=void 0,M={};return l.start=function(){y=f[1][0]-f[0][0],x=f[1][1]-f[0][1],S=[],A=!1,D||(D={x:.1,y:.1}),C||(C={x:0,y:1/0,magnitude:9.8},T={x:0,y:9.8});for(var t=u.length,e=-1,i=void 0,n=T.y<0?.1:.8;++e<t;)i=u[e],i.iid||(i.iid=++h),i.r||(i.r=10),i.x||(i.x=Math.random()*y*.9+i.r),i.y||(i.y=x*n+i.r),i.px||(i.px=i.x+0),i.py||(i.py=i.y),i.restitution||(i.restitution=.1),i.boundary||(i.boundary=0),i.timeToShrink||(i.timeToShrink=3),i.firstPass||(i.firstPass=!1),"active"in i||(i.active=!0),"fixed"in i||(i.fixed=!1);M.timeFrameDeltaSquare=b*b*w*w/(k*k),L&&clearInterval(L),L=setInterval(l.tick.bind(this),1e3*b)},l.addNode=function(t){y=f[1][0]-f[0][0],x=f[1][1]-f[0][1];var e=T.y>0?.1:.8;t.iid||(t.iid=++h),t.r||(t.r=10),t.x||(t.x=Math.random()*y*.9+t.r),t.y||(t.y=x*e+t.r),t.px||(t.px=t.x+0),t.py||(t.py=t.y),t.restitution||(t.restitution=.1),t.boundary||(t.boundary=0),t.timeToShrink||(t.timeToShrink=3),t.firstPass||(t.firstPass=!1),"active"in t||(t.active=!0),"fixed"in t||(t.fixed=!1),u.push(t),L&&clearInterval(L),L=setInterval(l.tick.bind(this),1e3*b)},l.addNodes=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];y=f[1][0]-f[0][0],x=f[1][1]-f[0][1];for(var i=T.y>0?.1:.8,n=t.length,a=-1,r=void 0;++a<n;)r=t[a],r.iid||(r.iid=++h),r.r||(r.r=10),r.x||(r.x=.5*y),r.y||(r.y=x*i+r.r),r.px||(r.px=r.x+0),r.py||(r.py=r.y),r.restitution||(r.restitution=.1),r.boundary||(r.boundary=0),r.timeToShrink||(r.timeToShrink=3),r.firstPass||(r.firstPass=!1),"active"in r||(r.active=!0),"fixed"in r||(r.fixed=!1),u.push(r);L&&clearInterval(L),e?setTimeout(l.tick.bind(this),1e3*b):(l.tick.call(this),L=setInterval(l.tick.bind(this),1e3*b))},l.pause=function(){L&&clearInterval(L)},l.resume=function(){L&&clearInterval(L),l.tick.call(this),L=setInterval(l.tick.bind(this),1e3*b)},l.tick=function(){for(var t=u.length,e=-1,r=void 0,h=void 0,p=void 0,v=void 0,g=void 0,y=void 0,x=void 0,w=M.timeFrameDeltaSquare,A=0;A<k;++A){for(e=-1;++e<t;)g=u[e],g&&!g.fixed&&(T?(p=T.x,v=T.y):(h=Math.atan2(C.y-g.y,C.x-g.x),p=C.magnitude*Math.cos(h),v=C.magnitude*Math.sin(h)),r={x:p+D.x*(g.px-g.x),y:v+D.y*(g.py-g.y)},g.x+=r.x*w,g.y+=r.y*w);for(i(!1),e=-1;++e<t;)g=u[e],g&&!g.fixed&&((m?n(g):o(g))&&(S.push(g),g.r*=.8),y=2*g.x-g.px,g.px=g.x,g.x=y,x=2*g.y-g.py,g.py=g.y,g.y=x);for(i(!0),e=-1;++e<t;)g=u[e],g.fixed||(m?a(g):c(g))&&(S.push(g),g.r*=.8)}e=t;for(var L=!1,G={},H=0,I=[];--e>=0;)g=u[e],!g.fixed&&g.firstPass&&(g.timeToShrink-=b,g.timeToShrink<0&&(g.timeToShrink=1.5,g.r*=.7,g.r<d&&(L=!0,g.boundary in G||(G[g.boundary]=!0),g.fixed=!0),g.active=!0)),g.fixed?++H:I.push(g);L&&(_.sed.apply(this,[{type:"sed",sedLayers:(0,s.default)(G),firstPassNodes:S}]),S=[]),H/u.length>.98&&l.finish(I),_.tick.apply(this,[{type:"tick",balls:u,bounds:f,gy:T.y}])},l.canBeFinished=function(t){return"boolean"==typeof t&&(A=t),l},l.finish=function(t){var e=this;if(A){console.log("finish"),L&&clearInterval(L);var i=-1,n=0,a=setInterval(function(){for(;++i<t.length;)t[i].r*=.8;_.tick.apply(e,[{type:"tick",balls:t,bounds:f}]),n>10&&(clearInterval(a),_.tick.apply(e,[{type:"tick",balls:[],bounds:f}]),_.end.apply(e,[{type:"end"}]),S=[]),++n},30)}},l.on=function(t,e){return arguments.length?1===arguments.length?_[t]:(2===arguments.length&&(_[t]=e),l):_},l.isAABBBoundary=function(t){return arguments.length?(m=t,l):m},l.bounds=function(t){return arguments.length?(f=t,l):f},l.friction=function(t){if(!arguments.length)return D;var e="undefined"==typeof t?"undefined":(0,r.default)(t);switch(e){case"object":Array.isArray(t)?2===t.length?D={x:t[0],y:t[1]}:1===t.length&&(D={x:t[0],y:t[0]}):D={x:t.x,y:t.y};break;case"number":D={x:t,y:t}}return l},l.gravity=function(t){if(!arguments.length)return D;var e="undefined"==typeof t?"undefined":(0,r.default)(t);switch(e){case"object":Array.isArray(t)?(C={x:t[0],y:t[1],magnitude:t[2]},T=isNaN(+t[0]*+t[1])?{x:0==t[0]?0:t[0]>0?t[2]:-t[2],y:0==t[1]?0:t[1]>0?t[2]:-t[2]}:null):(C={x:t.x,y:t.y,magnitude:t.magnitude},T=isNaN(+t.x*+t.y)?{x:0==t.x?0:t.x>0?t.magnitude:-t.magnitude,y:0==t.y?0:t.y>0?t.magnitude:-t.magnitude}:null);break;case"number":C={x:0,y:1/0,magnitude:t},T={x:0,y:t}}return l},l.boundary=function(t){if(!arguments.length)return p;var e="undefined"==typeof t?"undefined":(0,r.default)(t);switch(e){case"object":Array.isArray(t)?v=!1:(g=(0,s.default)(t),v=!0),p=t}return l},l.remove=function(){L&&clearInterval(L),l=null},l}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(45),r=n(a),o="/";e.default={ready:function(){var t=this;d3.json(this.rawDataPath,function(e,i){if(e)throw e;t.rawData=i,d3.json(t.rawStackDataPath,function(e,n){if(e)throw e;t.rawStackData=n,t.videoIds=t.$refs.clickAnimationComponent.setRawdata(i,n)})})},components:{NoBallDrop:r.default},rawData:null,rawStackData:null,data:function(){return{rawDataPath:o+"data/animation_All17.json_clean",rawStackDataPath:o+"data/animation_All17.json_clean_stack",vLinkIndex:"/",vLinkCongleiPath:"/conglei",vLinkNoForeshadow:"/no-foreshadow",videoIds:[],selectedVideo:null,zoomScaleMax:8,zoomScaleList:[1,2,4,8,16],isAcceleration:!0}},methods:{getData:function(){this.rawData&&this.rawStackData&&(this.videoIds=this.$refs.clickAnimationComponent.setRawdata(this.rawData,this.rawStackData),this.selectedVideo&&this.$refs.clickAnimationComponent.SelectVideo(this.selectedVideo))},SelectVideo:function(){this.$refs.clickAnimationComponent.SelectVideo(this.selectedVideo)},SelectSpeed:function(){this.$refs.clickAnimationComponent.SelectSpeed(this.zoomScaleMax)},ChangeAcceleration:function(){this.$refs.clickAnimationComponent.ChangeAcceleration(this.isAcceleration)},Pause:function(){this.$refs.clickAnimationComponent.Pause()},Resume:function(){this.$refs.clickAnimationComponent.Resume()}}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(34),r=n(a),o=i(9),s=n(o),c=i(12),l=n(c),h=i(47),u=n(h);e.default={ready:function(){this.InitVariables()},doc:null,timeFormat:null,stackLayout:null,singleYScale:null,singleXScale:null,frontGroundStackbar:null,timeLineAxis:null,moveLayout:null,moveLayout2:null,videosData:{},nodesToAdd:[],nodesToAdd2:[],xAxisGen:null,yAxisGen:null,xAxis:null,yAxis:null,xAxisTimeFormat:null,areaGen:null,frontGroundAreaGen:null,borderLineGen:null,digitalClock:null,digitalTimeFormat:null,digitalDateFormat:null,digitalClockHourScale:null,digitalClockMinuteScale:null,digitalClockRadius:null,digitalClockHourHandLength:null,digitalClockMinuteHandLength:null,digitalClockHandData:null,boundarys:{},boundarysUpOrDown:{},data:function(){return{padding:{top:0,left:100,bottom:50,right:50},chartWidth:500,chartHeight:400,barHeight:400,timeInterval:60,stackBarWidth:30,stackBarMaxY:-(1/0),stackBarMaxIndex:1,is2D:!1,isFragmentChart:!1,gDirection:1,gMagnitude:1.8,chartTemplate:null,layersName:[1,2,3],clickColor:{pause:"#FFC107",play:"#80CBC4",seeked:"#03A9F4",error:"#607D8B",ratechange:"#00BCD4",stalled:"#EF5350"},orderMapping:{stalled:0,ratechange:1,play:2,seeked:3,pause:4},clickBallSplitThreshold:20,count2:0,count20:0,timer:0,sumTime:0}},methods:{InitVariables:function(){var t=this;this.doc=l.default.select(this.$el),this.timeLineTimeFormat=l.default.time.format("%b %d %H:%M"),this.xAxisTimeFormat=l.default.time.format("%M:%S"),this.stackLayout=l.default.layout.stack().offset("zero").values(function(t){return t.values}).x(function(t){return t.x}).y(function(t){return t.y}),this.singleXScale=l.default.scale.linear().range([this.padding.left,this.chartWidth-this.padding.right]),this.singleYScale=l.default.scale.linear().range([this.chartHeight-this.padding.bottom,this.chartHeight-this.barHeight]),this.chartTemplate='<svg class="bubble-float-svg" width='+this.chartWidth+" height="+this.chartHeight+'></svg><canvas class="bubble-float-canvas" width='+this.chartWidth+" height="+(this.chartHeight-this.padding.bottom)+"></canvas>",this.nodesToAdd=[],this.xAxisGen=l.default.svg.axis().scale(this.singleXScale).tickSize(6,0).orient("bottom"),this.yAxisGen=l.default.svg.axis().scale(this.singleYScale).ticks(4).tickSize(6,0).orient("left"),this.areaGen=l.default.svg.area().interpolate("basis").x(function(e){return t.singleXScale(e.x)}).y0(function(e){return t.singleYScale(e.y0)}).y1(function(e){return t.singleYScale(e.y+e.y0)}),this.frontGroundAreaGen=l.default.svg.area().interpolate("basis").x(function(e){return t.singleXScale(e.x)}).y0(function(e){return t.singleYScale(e.y0)}).y1(function(e){return t.singleYScale(e.y0+e.clickNum)}),this.borderLineGen=l.default.svg.line().x(function(e){return t.singleXScale(e.x)}).y(function(e){return t.singleYScale(e.y0)}).interpolate("basis"),this.digitalDateFormat=l.default.time.format("%b %d"),this.digitalTimeFormat=l.default.time.format("%H:%M")},setTimeInterval:function(t){if(t){if(this.timeInterval=t,this.videosData)for(var e=(0,s.default)(this.videosData),i=0,n=e.length;i<n;++i)this.videosData[e[i]].hasAggregate=!1;return this}},setPosition:function(t,e){return l.default.select(this.$el).style({top:e+"px",left:t+"px"}),this},setSize:function(t){return Array.isArray(t)&&(this.chartWidth=t[0],this.chartHeight=t[1],this.chartTemplate='<svg class="bubble-float-svg" width='+this.chartWidth+" height="+this.chartHeight+'></svg><canvas class="bubble-float-canvas" width='+this.chartWidth+" height="+(this.chartHeight-this.padding.bottom)+"></canvas>",this.singleXScale.range([this.padding.left,this.chartWidth-this.padding.right]),this.singleYScale.range([this.chartHeight-this.padding.bottom,this.chartHeight-this.barHeight]),this.xAxisGen.scale(this.singleXScale),this.yAxisGen.scale(this.singleYScale)),this},setBarHeight:function(t){return"number"==typeof t&&(this.barHeight=t,this.singleYScale.range([this.chartHeight-this.padding.bottom,this.chartHeight-t])),this},setPadding:function(t){return"object"===("undefined"==typeof t?"undefined":(0,r.default)(t))&&(this.padding=t),this},setIs2D:function(t){return"boolean"==typeof t&&(this.is2D=t),this},setFragmentpadding:function(t){return"number"==typeof t&&(this.fragmentPadding=t),this},videosData:function(t){var e=(0,s.default)(t),i=e.map(function(e){return t[e]});return this.layersName=i[0].layers.filter(function(t){
return"error"!=t.name}).map(function(t){return t.name}),this.videosData=t,this},getTimeInterval:function(){return this.timeInterval},getVideoLength:function(t){var e=this.videosData[t];return e.layers[0].values.length},processData:function(t){if(t){if(!t.hasAggregate){for(var e=0,i=t.layers.length;e<i;++e){for(var n=t.layers[e],a=n.values,r=[],o=0,s=Math.ceil(a.length/this.timeInterval);o<s;++o)r.push({x:o,y:0});for(var c=1,l=a.length;c<l;++c){var h=Math.floor(c/this.timeInterval);r[h].y+=a[c].y}n.values=r,n._original_values=a}t.maxTime=Math.floor(t.maxTime/this.timeInterval);for(var u=-(1/0),d=0,f=t.layers[0].values.length;d<f;++d){for(var p=0,m=0,v=t.layers.length;m<v;++m)p+=t.layers[m].values[d].y;p>u&&(u=p)}t.maxSumValues=u,this.stackBarMaxY=u,this.stackBarMaxIndex=t.maxTime,t.hasAggregate=!0}var g=[];this.layersName=[];for(var y,x=0,b=t.layers.length;x<b;++x)y=t.layers[x],g[this.orderMapping[y.name]]=y,this.layersName[this.orderMapping[y.name]]=y.name;t.layers=g,this.layersName=this.layersName.reverse(),this.singleXScale.domain([0,t.maxTime]),this.singleYScale.domain([0,t.maxSumValues]),this.xAxisGen.scale(this.singleXScale),this.yAxisGen.scale(this.singleYScale)}},calBoundarys:function(t){for(var e={},i=void 0,n=void 0,a=void 0,r=void 0,o=0,s=this.layersName.length;o<s;++o){var c=this.layersName[o];i=t.select("g.layer-border."+c),r=i.select(function(){return this.parentNode}).classed("lower-chart"),i=i.select("path").node(),n=Math.floor(i.getTotalLength()),e[c]={pathLength:n,isLowerChart:r,values:[]},a=[];for(var l,h,u,d=0;d<n;++d)l=i.getPointAtLength(d),h=Math.round(l.x),u=Math.abs(l.x-h),a[h]?u<a[h]&&(a[h]=u,e[c].values[h]=l.y):(a[h]=u,e[c].values[h]=l.y)}this.boundarys=e},drawFregmentStackBarChart:function(t){var e=this;this.isFragmentChart=!0,this.boundarysUpOrDown={},this.clean(),this.processData(this.videosData[t]),this.singleYScale.range([.5*(this.chartHeight-this.padding.bottom),this.chartHeight-.5*this.barHeight]),this.chartTemplate='<svg class="bubble-float-svg" width='+this.chartWidth+" height="+(this.chartHeight+this.fragmentPadding)+'></svg><canvas class="bubble-float-canvas" width='+this.chartWidth+" height="+(this.chartHeight-this.padding.bottom+this.fragmentPadding)+"></canvas>";var i=this.doc.append("div").attr({id:t,class:"bubble-float-chart"}).html(this.chartTemplate).select("svg"),n=this.singleXScale.domain()[1];this.stackBarWidth=this.chartWidth/n,this.xAxisGen.ticks(n);var a=this.stackLayout(this.videosData[t].layers.filter(function(t,e){return e>=3})),r=this.stackLayout(this.videosData[t].layers.filter(function(t,e){return e<3}));i.append("g").attr("class","back-ground upper-chart").selectAll("g.layer").data(a).enter().append("g").attr("class",function(t){return"layer "+t.name}).append("path").attr("d",function(t){return e.areaGen(t.values)}),i.append("g").attr("class","back-ground lower-chart").attr("transform","translate(0,"+(this.fragmentPadding+.5*this.chartHeight)+")").selectAll("g.layer").data(r).enter().append("g").attr("class",function(t){return"layer "+t.name}).append("path").attr("d",function(t){return e.areaGen(t.values)});var o=a[a.length-1].values.map(function(t){return{x:t.x,y0:t.y+t.y0}});this.layersName.unshift("zero_"),i.select("g.back-ground.upper-chart").selectAll("g.layer-border").data(a.concat([{name:"zero_",values:o}])).enter().append("g").attr("class",function(t){return"layer-border "+t.name}).append("path").attr("d",function(t){return e.borderLineGen(t.values)}),this.borderLineGen.y(function(t){return e.fragmentPadding+.5*e.chartHeight+e.singleYScale(t.y0)}),i.select("g.back-ground.lower-chart").selectAll("g.layer-border").data(r).enter().append("g").attr("class",function(t){return"layer-border "+t.name}).append("path").attr("d",function(t){return e.borderLineGen(t.values)}),this.calBoundarys(i);for(var s=0,c=a.length;s<c;++s){for(var l=0,h=a[s].values.length;l<h;++l)a[s].values[l].clickNum=0;this.boundarysUpOrDown[a[s].name]=.5*this.chartHeight}for(var u=0,d=r.length;u<d;++u){for(var f=0,p=r[u].values.length;f<p;++f)r[u].values[f].clickNum=0;this.boundarysUpOrDown[r[u].name]=.5*this.chartHeight+this.fragmentPadding}return this.frontGroundStackbar=i.append("g").attr("class","front-ground"),this.frontGroundStackbar.selectAll("g.layer upper-chart").data(a).enter().append("g").attr("class",function(t){return"layer "+t.name}).append("path").attr("d",function(t){return e.frontGroundAreaGen(t.values)}),this.frontGroundStackbar.selectAll("g.layer lower-chart").data(r).enter().append("g").attr("class",function(t){return"layer "+t.name}).append("path").attr("transform","translate(0,"+(this.fragmentPadding+.5*this.chartHeight)+")").attr("d",function(t){return e.frontGroundAreaGen(t.values)}),this.drawLegends(i,i),this.resetMoveLayout(i),this},drawStackAreaChart:function(t){var e=this;this.isFragmentChart=!1,this.clean(),this.processData(this.videosData[t]);var i=this.doc.append("div").attr({id:t,class:"bubble-float-chart"}).html(this.chartTemplate).select("svg"),n=this.singleXScale.domain()[1];this.stackBarWidth=this.chartWidth/n,this.xAxisGen.ticks(n);var a=this.stackLayout(this.videosData[t].layers);i.append("g").attr("class","back-ground upper-chart").selectAll("g.layer").data(a).enter().append("g").attr("class",function(t){return"layer "+t.name}).append("path").attr("d",function(t){return e.areaGen(t.values)});var r=a[a.length-1].values.map(function(t){return{x:t.x,y0:t.y+t.y0}});this.layersName.unshift("zero_"),i.select("g.back-ground.upper-chart").selectAll("g.layer-border").data(a.concat([{name:"zero_",values:r}])).enter().append("g").attr("class",function(t){return"layer-border "+t.name}).append("path").attr("d",function(t){return e.borderLineGen(t.values)}),this.calBoundarys(i);for(var o=0,s=a.length;o<s;++o)for(var c=0,l=a[o].values.length;c<l;++c)a[o].values[c].clickNum=0;return this.frontGroundStackbar=i.append("g").attr("class","front-ground"),this.frontGroundStackbar.selectAll("g.layer upper-chart").data(a).enter().append("g").attr("class",function(t){return"layer "+t.name}).append("path").attr("d",function(t){return e.frontGroundAreaGen(t.values)}),this.drawLegends(i),this.resetMoveLayout(i),this},drawNoStackChart:function(t){this.isFragmentChart=!1,this.clean(),this.processData(this.videosData[t]),this.layersName.unshift("zero_");var e=this.doc.append("div").attr({id:t,class:"bubble-float-chart"}).html(this.chartTemplate).select("svg");return this.drawLegends(e),this.resetMoveLayout(e),this},drawStackChart:function(t,e){switch(t){case"middle":this.drawFregmentStackBarChart(e);break;case"down":this.gDirection=-1,this.drawStackAreaChart(e);break;default:this.gDirection=1,this.drawStackAreaChart(e)}return this},drawLegends:function(t,e){var i=this;this.xAxis=t.select("g.back-ground.upper-chart").append("g").attr({class:"x axis",transform:"translate("+[.5*-this.stackBarWidth,this.chartHeight-this.padding.bottom]+")"}).call(this.xAxisGen),this.xAxis.selectAll(".tick text").text(function(t,e){if(1&e)return i.xAxisTimeFormat(new Date(i.timeInterval*t*1e3))}),this.xAxis.append("text").attr({class:"caption",x:.5*this.chartWidth,y:this.padding.bottom-5}).text("Video Progress"),this.yAxis=t.select("g.back-ground.upper-chart").append("g").attr({class:"y axis",transform:"translate("+[this.padding.left,0]+")"}).call(this.yAxisGen),this.yAxis.append("text").attr({class:"caption vertical-caption",x:-this.chartHeight+.5*this.barHeight+this.padding.bottom,y:-45}).text("Number of Clicks"),e&&(this.xAxis.attr("transform","translate("+[.5*-this.stackBarWidth,.5*(this.chartHeight-this.padding.bottom)]+")"),e.select("g.back-ground.lower-chart").append("g").attr({class:"x axis",transform:"translate("+[.5*-this.stackBarWidth,.5*(this.chartHeight-this.padding.bottom)]+")"}).call(this.xAxisGen),e.select("g.back-ground.lower-chart").append("g").attr("class","y axis").call(this.yAxisGen));var n=t.append("g").attr({class:"legend",transform:"translate("+[this.chartWidth-this.padding.left,10]+")"}).selectAll("g.legend-rect").data(this.layersName.filter(function(t,e){return e})).enter().append("g").attr("class",function(t){return"legend-rect "+t});n.append("rect").attr({y:function(t,e){return 25*e},height:20,width:20}),n.append("text").attr({y:function(t,e){return 25*e+15},x:-5}).style({"text-anchor":"end"}).text(function(t){return t}),this.timeLineAxis=t.append("g").attr("class","timeline axis").attr("transform","translate("+[.5*this.chartWidth,this.chartHeight-this.barHeight-10]+")").style("opacity",1e-6),this.timeLineAxis.append("line").attr({x1:-50,x2:50,y1:-20,y2:-20}),this.timeLineAxis.append("text"),this.drawDigitalClock(t)},drawDigitalClock:function(t){this.digitalClock=t.append("g").attr("class","clock-group").attr("transform","translate("+[.5*this.chartWidth,60]+")"),this.digitalClock.append("line").attr({x1:-150,y1:20,y2:20,x2:150}),this.digitalClock.append("text").attr({class:"date"}).text("TEST"),this.digitalClock.append("text").attr({class:"time",y:85}).text("TEST")},AnimationUpdateDigitalClock:function(t){this.digitalClock&&("number"!=typeof t&&"string"!=typeof t||(t=new Date(t)),this.digitalClock.select("text.date").text(this.digitalDateFormat(t)),this.digitalClock.select("text.time").text(this.digitalTimeFormat(t)))},resetMoveLayout:function(){var t=this,e=this.doc.select("canvas").node().getContext("2d"),i=function(i){var n=2*Math.PI,a=(i.gy,i.balls),r=-1,o=void 0,s=a.length,c=i.bounds;e.clearRect(c[0][0],c[0][1],c[1][0]-c[0][0],c[1][1]-c[0][1]);for(var l={dist:-(1/0),barTs:0};++r<s;)o=a[r],o.fixed||(e.beginPath(),e.fillStyle=o.color,e.arc(o.x,o.y,o.r,0,n),e.fill(),o.y<t.chartHeight-t.barHeight&&o.y>t.chartHeight-t.barHeight-20&&o.y>l.dist&&(l.dist=o.y,l.barTs=o.barTs))},n=function(e){var i=e.firstPassNodes;if(t.frontGroundStackbar){for(var n,a,r=0,o=i.length;r<o;++r)n=i[r],a=t.frontGroundStackbar.select("g.layer."+n.boundary).data()[0].values,a[n.xIndex].clickNum+=n.clickNum;for(var s=0,c=e.sedLayers.length;s<c;++s)t.frontGroundStackbar.select("g.layer."+e.sedLayers[s]).select("path").transition().attr("d",function(e){return t.frontGroundAreaGen(e.values)})}},a=function(e){t.frontGroundAreaGen.y1(function(e){return t.singleYScale(e.y0+e.y)}),t.frontGroundStackbar.selectAll("g.layer").select("path").transition().attr("d",function(e){return t.frontGroundAreaGen(e.values)})};this.isFragmentChart?(this.moveLayout=(0,u.default)([]).friction(4).gravity([0,-this.gDirection*(1/0),this.gMagnitude]).bounds([[this.padding.left,0],[this.chartWidth-this.padding.right,this.fragmentPadding+.5*(this.chartHeight-this.padding.bottom)]]).boundary(this.boundarys).on("tick",i).on("sed",n).on("end",a),this.moveLayout2=(0,u.default)([]).friction(4).gravity([0,this.gDirection*(1/0),this.gMagnitude]).bounds([[this.padding.left,this.fragmentPadding+.5*(this.chartHeight-this.padding.bottom)],[this.chartWidth-this.padding.right,this.fragmentPadding+this.chartHeight-this.padding.bottom]]).boundary(this.boundarys).on("tick",i).on("sed",n).on("end",a)):this.moveLayout=(0,u.default)([]).friction(4).gravity([0,this.gDirection*(1/0),0]).bounds([[this.padding.left,0],[this.chartWidth-this.padding.right,this.chartHeight-this.padding.bottom]]).boundary(this.boundarys).on("tick",i).on("sed",n).on("end",a)},accelerateBallsDropping:function(t){this.moveLayout&&"number"==typeof t&&this.moveLayout.gravity([0,this.gDirection*(1/0),t*this.gMagnitude])},bubbleInitYPositionGen:function(){var t=this;if(!this.is2D)return this.isFragmentChart?function(e){return t.boundarysUpOrDown[e.boundary]+5+20*Math.random()}:function(){return t.gDirection>0?50+20*Math.random():.9*(t.height-t.padding.bottom)};var e=function(){var e=(0,s.default)(t.boundarys);return t.isFragmentChart?{v:function(i){var n=i.boundary,a=e[e.indexOf(n)-1],r=t.boundarys[a],o=void 0;return o=r&&r.isLowerChart===t.boundarys[n].isLowerChart?r.values[Math.round(i.x)]+i.r:t.boundarys[n].values[Math.round(i.x)]-60}}:{v:function(i){var n=i.boundary,a=e[e.indexOf(n)-1],r=t.boundarys[a]&&t.boundarys[a].values,o=r?r[Math.round(i.x)]+i.r:t.boundarys[n].values[Math.round(i.x)]-60;return o}}}();return"object"===("undefined"==typeof e?"undefined":(0,r.default)(e))?e.v:void 0},inputClicks:function(t,e){for(var i={},n=1,a=0,r=t.length;a<r;++a){var o=t[a],c=Math.floor(o.currentTime/this.timeInterval),l=o.type+"-"+c;if(l in i)++i[l].clickNum,i[l].clickNum>n&&(n=i[l].clickNum);else{var h=this.singleXScale(c);h+=c>=this.stackBarMaxIndex?-this.stackBarWidth:this.stackBarWidth*Math.random(),i[l]={boundary:o.type,xIndex:c,barTs:e.ts,x:h,clickNum:1,color:this.clickColor[o.type]}}}for(var u,d=this.bubbleInitYPositionGen(),f=(0,s.default)(i),p=[],m=[],v=0,g=f.length;v<g;++v){u=i[f[v]],u.r=.8*u.clickNum,u.y=d(u),u.py=u.y-2;var y=[],x=this.getOffsetBetweenUpAndDown(u);if(u.r>x){for(var b=u.r;b-x>0;)y.push({boundary:u.boundary,xIndex:u.xIndex,x:u.x,y:u.y,py:u.py,barTs:u.barTs,r:x,clickNum:0,color:u.color}),b-=x;y.push({boundary:u.boundary,xIndex:u.xIndex,x:u.x,y:u.y,py:u.py,barTs:u.barTs,r:b,clickNum:u.clickNum,color:u.color})}else y.push(u);if(this.isFragmentChart)for(var k=0,w=y.length;k<w;++k){var T=y[k];this.boundarysUpOrDown[T.boundary]<=.5*this.chartHeight?p.push(T):m.push(T)}else for(var C=0,D=y.length;C<D;++C)p.push(y[C])}return this.nodesToAdd=p,this.isFragmentChart&&(this.nodesToAdd2=m),this},getOffsetBetweenUpAndDown:function(t){if(!this.boundarys)return this.clickBallSplitThreshold;var e=(0,s.default)(this.boundarys),i=e[e.indexOf(t.boundary)-1],n=this.boundarys[i]&&this.boundarys[i].values;if(!n)return this.clickBallSplitThreshold;var a=this.boundarys[t.boundary].values,r=n[Math.round(t.x)],o=a[Math.round(t.x)],c=o-r;return Math.min(.5*c,this.clickBallSplitThreshold)},testMoveLayout:function(t){this.moveLayout.addNode(t)},drawClicks:function(){return this.moveLayout&&this.nodesToAdd.length&&(this.moveLayout.addNodes(this.nodesToAdd),this.nodesToAdd=void 0,this.isFragmentChart&&(this.moveLayout2.addNodes(this.nodesToAdd2),this.nodesToAdd2=void 0)),this},canBeFinished:function(t){return"boolean"==typeof t&&this.moveLayout.canBeFinished(t),this},finish:function(){console.log("finish"),this.moveLayout.finish()},clean:function(){var t=this;this.chartTemplate='<svg class="bubble-float-svg" width='+this.chartWidth+" height="+this.chartHeight+'></svg><canvas class="bubble-float-canvas" width='+this.chartWidth+" height="+(this.chartHeight-this.padding.bottom)+"></canvas>",this.singleYScale.range([this.chartHeight-this.padding.bottom,this.chartHeight-this.barHeight]),this.borderLineGen.y(function(e){return t.singleYScale(e.y0)}),this.frontGroundAreaGen.y1(function(e){return t.singleYScale(e.y0+e.clickNum)}),this.nodesToAdd=this.nodesToAdd2=void 0,this.doc.select("div").remove(),this.moveLayout&&this.moveLayout.remove(),this.moveLayout2&&this.moveLayout2.remove(),this.moveLayout2=void 0},start:function(){this.moveLayout&&this.moveLayout.start(),this.isFragmentChart&&this.moveLayout2&&this.moveLayout2.start()},pause:function(){this.moveLayout&&this.moveLayout.pause()},resume:function(){this.moveLayout&&this.moveLayout.resume()}}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(9),r=n(a),o=i(32),s=n(o);e.default={components:{BubbleFloat:s.default},ready:function(){Array.prototype.aggregate=function(t){for(var e=this.length,i=[],n=0,a=0;a<e;a++)n+=this[a],(a+1)%t==0&&(i.push(n/t),n=0);return e%t!=0&&i.push(n/e%t),i},this.InitVariables(),this.clickData||this.$root.getData()},doc:null,svg:null,stackGraph:null,contextTimeLineG:null,contextXscale:null,contextTimeLineXAxisGen:null,contextTimeLineXAxis:null,stackXscale:null,stackYscale:null,stackXAxisGen:null,stackYAxisGen:null,stackXAxis:null,stackYAxis:null,xAxisTimeFormat:null,areaGen:null,stackLayout:null,digitalClock:null,digitalTimeFormat:null,digitalDateFormat:null,clickData:null,stackData:null,animationTimer:null,data:function(){return{padding:{top:0,right:50,bottom:30,left:50},width:null,height:null,center:null,titleHeight:null,viewInnerWidth:null,viewInnerHeight:null,selectedVideo:null,timeInterval:60,stackBarMaxY:0,stackBarMaxIndex:0,stackBarWidth:0,chartHeight:300,barHeight:300,chartWidth:0,playrate:2e4,clickColor:{pause:"#FFC107",play:"#80CBC4",seeked:"#03A9F4",error:"#607D8B",ratechange:"#00BCD4",stalled:"#EF5350"},orderMapping:{stalled:0,ratechange:1,play:2,seeked:3,pause:4}}},methods:{setRawdata:function(t,e){this.clickData={};for(var i=0,n=t.length;i<n;++i)if(0!==t[i].currentTime){t[i].date=new Date(t[i].ts);var a=t[i].videoId;this.clickData[a]||(this.clickData[a]={});var o=this.clickData[a];o.clickDataGroupByTimeArray||(o.clickDataGroupByTimeArray=[]),o.clickDataGroupByTimeArray.push(t[i])}for(var s=(0,r.default)(this.clickData),c=0,l=s.length;c<l;++c){var h=this.clickData[s[c]];h.clickDataGroupByTimeArray.sort(function(t,e){return+t.ts-+e.ts})}return this.stackData=e,this.$refs.bubbleFloatComponent.setBarHeight(this.stackBarChartHeight).setTimeInterval(30).videosData(e),s},SelectVideo:function(t){this.selectedVideo=t,this.clean();var e=this.clickData[this.selectedVideo],i=e.clickDataGroupByTimeArray;this.contextXscale.domain(d3.extent(i,function(t){return+t.ts})),this.xDomainMin=this.contextXscale.domain()[0],this.xDomainMax=this.contextXscale.domain()[1],setTimeout(this.InitView,20)},InitVariables:function(){var t=this;this.doc=d3.select(this.$el),this.titleHeight=this.doc.select(".mdl-card__title").node().clientHeight,this.width=this.doc.node().clientWidth,this.height=this.doc.node().clientHeight-this.titleHeight,this.viewInnerWidth=this.width,this.viewInnerHeight=this.height,this.contextTimeLineHeight=.1*this.height,this.chartWidth=this.width-this.padding.left-this.padding.right,this.chartHeight=.7*this.height,this.svg=this.doc.select("svg.conglei-svg").attr("height",this.viewInnerHeight),this.center=[.5*this.viewInnerWidth,.5*this.viewInnerHeight],this.svg.append("rect").attr({class:"svg-background",x:0,y:0,width:this.width,height:.15*this.height}),this.stackLayout=d3.layout.stack().offset("zero").values(function(t){return t.values}).x(function(t){return t.x}).y(function(t){return t.y}),this.xAxisTimeFormat=d3.time.format("%M:%S"),this.contextXscale=d3.time.scale().range([this.padding.right,this.viewInnerWidth-this.padding.left]),this.contextTimeLineXAxisGen=d3.svg.axis().scale(this.contextXscale).orient("top").tickSize(6,0).tickFormat(function(t){return d3.time.format("%b %d")(t)}),this.stackXscale=d3.scale.linear().range([this.padding.left,this.chartWidth-this.padding.right]),this.stackXAxisGen=d3.svg.axis().scale(this.stackXscale).tickSize(6,0).orient("bottom"),this.stackYscale=d3.scale.linear().range([.8*this.chartHeight-this.padding.bottom,.8*this.chartHeight-this.barHeight]),this.stackYAxisGen=d3.svg.axis().scale(this.stackYscale).ticks(4).tickSize(6,0).orient("left"),this.areaGen=d3.svg.area().interpolate("basis").x(function(e){return t.stackXscale(e.x)}).y0(function(e){return t.stackYscale(e.y0)}).y1(function(e){return t.stackYscale(e.y+e.y0)}),this.digitalDateFormat=d3.time.format("%b %d"),this.digitalTimeFormat=d3.time.format("%H:%M")},InitView:function(){this.contextTimeLineG=this.svg.append("g").attr("class","time-line-context-group").attr("transform","translate("+[0,this.padding.top+this.titleHeight]+")"),this.contextTimeLineXAxis=this.contextTimeLineG.append("g").attr("class","x axis"),this.contextTimeLineXAxis.call(this.contextTimeLineXAxisGen),this.contextTimeLineXAxis.append("circle").attr({cx:this.contextXscale.range()[0],r:10,class:"time-pivot"}),this.drawStackGraph()},processStackData:function(t){if(t){if(!t.hasAggregate){for(var e=0,i=t.layers.length;e<i;++e){for(var n=t.layers[e],a=n.values,r=[],o=0,s=Math.ceil(a.length/this.timeInterval);o<s;++o)r.push({x:o,y:0});for(var c=1,l=a.length;c<l;++c){var h=Math.floor(c/this.timeInterval);r[h].y+=a[c].y}n.values=r,n._original_values=a}t.maxTime=Math.floor(t.maxTime/this.timeInterval);for(var u=-(1/0),d=0,f=t.layers[0].values.length;d<f;++d){for(var p=0,m=0,v=t.layers.length;m<v;++m)p+=t.layers[m].values[d].y;p>u&&(u=p)}t.maxSumValues=u,this.stackBarMaxY=u,this.stackBarMaxIndex=t.maxTime,t.hasAggregate=!0}var g=[];this.layersName=[];for(var y,x=0,b=t.layers.length;x<b;++x)y=t.layers[x],g[this.orderMapping[y.name]]=y,this.layersName[this.orderMapping[y.name]]=y.name;t.layers=g,this.layersName=this.layersName.reverse(),this.stackXscale.domain([0,t.maxTime]),this.stackYscale.domain([0,t.maxSumValues]),this.stackXAxisGen.scale(this.stackXscale),this.stackYAxisGen.scale(this.stackYscale)}},drawStackGraph:function(){var t=this;this.processStackData(this.stackData[this.selectedVideo]);var e=this.stackGraph=this.svg.append("g").attr({class:"stack-graph",transform:function(){return"translate("+[t.padding.left,.25*t.height]+")"}}),i=this.stackXscale.domain()[1];this.stackBarWidth=this.chartWidth/i,this.stackXAxisGen.ticks(i);var n=this.stackLayout(this.stackData[this.selectedVideo].layers);e.append("g").attr("class","back-ground upper-chart").style("opacity",1e-6).selectAll("g.layer").data(n).enter().append("g").attr("class",function(t){return"layer "+t.name}).append("path").attr("d",function(e){return t.areaGen(e.values)}),this.drawDigitalClock(this.svg),this.start()},drawLegends:function(t){var e=this;this.stackXAxis=t.select("g.back-ground.upper-chart").append("g").attr({class:"x axis",transform:"translate("+[.5*-this.stackBarWidth+this.padding.left,.8*this.chartHeight-this.padding.bottom]+")"}).call(this.stackXAxisGen),this.stackXAxis.selectAll(".tick text").text(function(t,i){if(1&i)return e.xAxisTimeFormat(new Date(e.timeInterval*t*1e3))}),this.stackXAxis.append("text").attr({class:"caption",x:.5*this.chartWidth,y:this.padding.bottom+20}).text("Video Progress"),this.stackYAxis=t.select("g.back-ground.upper-chart").append("g").attr({class:"y axis",transform:"translate("+[this.padding.left,0]+")"}).call(this.stackYAxisGen),this.stackYAxis.append("text").attr({class:"caption vertical-caption",x:.8*-this.chartHeight+.5*this.barHeight+this.padding.bottom,y:-45}).text("Number of Clicks");var i=t.append("g").attr({class:"legend",transform:"translate("+[this.chartWidth-this.padding.left,10]+")"}).selectAll("g.legend-rect").data(this.layersName).enter().append("g").attr("class",function(t){return"legend-rect "+t});i.append("rect").attr({y:function(t,e){return 25*e},height:20,width:20}),i.append("text").attr({y:function(t,e){return 25*e+15},x:-5}).style({"text-anchor":"end"}).text(function(t){return t})},drawDigitalClock:function(t){this.digitalClock=t.append("g").attr("class","clock-group").attr("transform","translate("+[this.center[0],this.padding.top+this.titleHeight+.2*this.height]+")"),this.digitalClock.append("line").attr({x1:-150,y1:20,y2:20,x2:150}),this.digitalClock.append("text").attr({class:"date"}).text("TEST"),this.digitalClock.append("text").attr({class:"time",y:85}).text("TEST")},AnimationUpdateDigitalClock:function(t){this.digitalClock&&("number"!=typeof t&&"string"!=typeof t||(t=new Date(t)),this.digitalClock.select("text.date").text(this.digitalDateFormat(t)),this.digitalClock.select("text.time").text(this.digitalTimeFormat(t)))},start:function(){var t=this,e=function e(){if(!(o<s*c)){var i=s*c,n=Math.min(r.length,(s+1)*c),a=r.slice(i,n),u=a.length,d=a[0].ts;s++;var f=0;h.selectAll(".points_"+s).data(a,function(t){return t.ts}).enter().append("circle").attr({class:function(t){return t.type},cx:function(e){return t.stackXscale(e.currentTime/t.timeInterval)},r:0,opacity:1}).transition().delay(function(e){return(e.ts-d)/t.playrate}).duration(1e3).ease("cubic").attr({opacity:.2,r:l}).each("end",function(t){++f,d3.select(this).remove(),f===u&&e()})}};console.log(this.stackXscale.domain()),console.log(this.stackXscale.range());var i=void 0,n=this.contextXscale.domain()[0].getTime(),a=!1,r=this.clickData[this.selectedVideo].clickDataGroupByTimeArray,o=r.length;console.log(r);var s=0,c=100,l=40,h=this.stackGraph.append("g").attr("class","event-circle").attr("transform","translate("+[0,this.chartHeight-this.padding.bottom-l]+")");setTimeout(function(){t.stackGraph.select("g.back-ground").transition().duration(1e3).style("opacity","1")},1e4),this.contextTimeLineXAxis.select("circle").transition().ease("linear").duration((this.contextXscale.domain()[1].getTime()-this.contextXscale.domain()[0].getTime())/this.playrate).attrTween("cx",function(){return function(o){if(i=t.contextXscale.domain()[0].getTime()+o*(t.contextXscale.domain()[1].getTime()-t.contextXscale.domain()[0].getTime()),t.AnimationUpdateDigitalClock(i),!a){if(i<r[0].ts)return;a=!0,e()}return n=i,t.contextXscale.range()[0]+o*(t.contextXscale.range()[1]-t.contextXscale.range()[0])}})},stop:function(){clearTimeout(this.animationTimer)},clean:function(){this.stop(),this.contextTimeLineG&&this.contextTimeLineG.selectAll("*").remove(),this.stackGraph&&this.stackGraph.selectAll("*").remove(),this.digitalClock&&this.digitalClock.selectAll("*").remove()}}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(9),r=n(a),o=i(12),s=n(o),c=i(31);n(c);i(30);var l=i(32),h=n(l),u=i(33);n(u);e.default={components:{BubbleFloat:h.default},ready:function(){this.InitVariables(),console.log("ready no-ball-drop"),this.clickData||this.$root.getData()},doc:null,svg:null,contextTimeLineG:null,timelineChartData:null,timelineChartLineGen:null,animation:null,digitalClock:null,focusXscale:null,contextXscale:null,contextBarChartYscale:null,arcGen:null,brush:null,dateFormat:null,timeFormat:null,data:function(){return{clickData:null,padding:{top:0,right:20,bottom:30,left:20},width:null,height:null,center:null,titleHeight:null,viewInnerWidth:null,viewInnerHeight:null,contextTimeLineHeight:null,contextTimeLineY:null,stackBarChartHeight:300,focusRegionWidth:200,focusRegionScale:20,focusMoveRange:10,zoomScaleMax:8,focusTimeLineViewScale:1,focusDataScale:1,isAcceleration:!0,accelerateMode:"domain",selectedVideo:"",baseDuration:1e3,currentDuration:1e3,timeInterval:{name:"Hour",ms:36e5},is2D:!1,xDomainMin:null,xDomainMax:null}},methods:{setRawdata:function(t,e){this.clickData={};for(var i=this.zoomScaleMax*this.timeInterval.ms,n=0,a=t.length;n<a;++n)if(0!==t[n].currentTime){t[n].date=new Date(t[n].ts);var o=t[n].videoId;this.clickData[o]||(this.clickData[o]={});var s=this.clickData[o];s.clickDataGroupByTimeArray||(s.clickDataGroupByTimeArray={}),s.clickDataGroupByTimeDict||(s.clickDataGroupByTimeDict={}),s.clickDataGroupByTimeArray[this.focusTimeLineViewScale]||(s.clickDataGroupByTimeArray[this.focusTimeLineViewScale]=[]),s.clickDataGroupByTimeDict[this.focusTimeLineViewScale]||(s.clickDataGroupByTimeDict[this.focusTimeLineViewScale]={}),s.clickDataGroupByTimeArray[this.zoomScaleMax]||(s.clickDataGroupByTimeArray[this.zoomScaleMax]=[]),s.clickDataGroupByTimeDict[this.zoomScaleMax]||(s.clickDataGroupByTimeDict[this.zoomScaleMax]={});var c=Math.floor(t[n].ts/this.timeInterval.ms);s.clickDataGroupByTimeDict[this.focusTimeLineViewScale][c]||(s.clickDataGroupByTimeDict[this.focusTimeLineViewScale][c]=[]),s.clickDataGroupByTimeDict[this.focusTimeLineViewScale][c].push(t[n]),c=Math.floor(t[n].ts/i),s.clickDataGroupByTimeDict[this.zoomScaleMax][c]||(s.clickDataGroupByTimeDict[this.zoomScaleMax][c]=[]),s.clickDataGroupByTimeDict[this.zoomScaleMax][c].push(t[n])}for(var l=(0,r.default)(this.clickData),h=0,u=l.length;h<u;++h){for(var d=this.clickData[l[h]],f=(0,r.default)(d.clickDataGroupByTimeDict[this.focusTimeLineViewScale]),p=0,m=f.length;p<m;++p)d.clickDataGroupByTimeArray[this.focusTimeLineViewScale][p]={ts:+f[p]*this.timeInterval.ms,value:d.clickDataGroupByTimeDict[this.focusTimeLineViewScale][f[p]]};f=(0,r.default)(d.clickDataGroupByTimeDict[this.zoomScaleMax]);for(var v=0,g=f.length;v<g;++v)d.clickDataGroupByTimeArray[this.zoomScaleMax][v]={ts:+f[v]*i,value:d.clickDataGroupByTimeDict[this.zoomScaleMax][f[v]]}}return this.$refs.bubbleFloatComponent.setBarHeight(this.stackBarChartHeight).setIs2D(this.is2D).setTimeInterval(30).videosData(e),l},processData:function(t){if(!t.statics){var e=s.default.extent(t,function(t){return t.value.length}),i=e[1],n=e[0],a=s.default.mean(t,function(t){return t.value.length}),r=s.default.median(t,function(t){return t.value.length}),o=s.default.deviation(t,function(t){return t.value.length});t.statics={extent:e,max:i,min:n,mean:a,median:r,deviation:o}}},calOutLier:function(t){if(!t.outliers){t.statics||this.processData(t);for(var e,i=t.statics,n=i.mean,a=i.deviation,o=2,s=n+o*a,c=n-o*a,l=[],h=0,u=t.length;h<u;++h)e=t[h].value.length,(e>s||e<c)&&(t[h].isOutlier=!0,l.push(t[h]));t.outliers=l;for(var d=0,f=t.length;d<f;){var p=t[d];if(p.isOutlier){for(var m=d-5;++m<d+5;)if(t[m])if(t[m].siso)for(var v=m+1;t[--v].siso;)t[v].siso=0;else t[m].siso=m-d;d+=5}else++d}for(var g=(this.$refs.bubbleFloatComponent.getTimeInterval(),[]),y=this.$refs.bubbleFloatComponent.getVideoLength(this.selectedVideo),x=0,b=l.length;x<b;++x){for(var k=l[x],w=[{},{},{}],T=0,C=k.value.length;T<C;++T){var D=k.value[T],A=D.currentTime/y;A=A<1/3?0:A<2/3?1:2,D.type in w[A]?w[A][D.type]++:w[A][D.type]=0}for(var S=function(t,e){var i=w[t],n=void 0,a=-1;(0,r.default)(i).forEach(function(t){i[t]>a&&(n={type:t},a=i[t])}),n&&(n.ts=k.ts),w[t]=n},_=0,L=w.length;_<L;++_)S(_,L);g.push({ts:k.ts,indicatorData:w})}t.outliersStatics=g}},SelectVideo:function(t){this.selectedVideo=t;var e=this.clickData[this.selectedVideo],i=e.clickDataGroupByTimeArray[1],n=e.clickDataGroupByTimeArray[this.zoomScaleMax];if(!n){n=e.clickDataGroupByTimeArray[this.zoomScaleMax]=[];for(var a=e.clickDataGroupByTimeDict[this.zoomScaleMax]={},o=this.timeInterval.ms*this.zoomScaleMax,c=0,l=i.length;c<l;++c)for(var h=i[c].value,u=0,d=h.length;u<d;++u){var f=h[u],p=Math.floor(f.ts/o);a[p]||(a[p]=[]),a[p].push(f)}for(var m=(0,r.default)(a),v=0,g=m.length;v<g;++v)n[v]={ts:+m[v]*o,value:a[m[v]]}}this.calOutLier(i),this.calOutLier(n),this.contextBarChartYscale.domain(i.statics.extent),this.focusXscale.domain(s.default.extent(i,function(t){return+t.ts})),this.contextXscale.domain(this.focusXscale.domain()),this.xDomainMin=this.focusXscale.domain()[0],this.xDomainMax=this.focusXscale.domain()[1],setTimeout(this.InitView,20)},SelectSpeed:function(t){this.zoomScaleMax=t;var e=this.clickData[this.selectedVideo],i=e.clickDataGroupByTimeArray[1],n=e.clickDataGroupByTimeArray[this.zoomScaleMax];if(!n){n=e.clickDataGroupByTimeArray[this.zoomScaleMax]=[];for(var a=e.clickDataGroupByTimeDict[this.zoomScaleMax]={},o=this.timeInterval.ms*this.zoomScaleMax,s=0,c=i.length;s<c;++s)for(var l=i[s].value,h=0,u=l.length;h<u;++h){var d=l[h],f=Math.floor(d.ts/o);a[f]||(a[f]=[]),a[f].push(d)}for(var p=(0,r.default)(a),m=0,v=p.length;m<v;++m)n[m]={ts:+p[m]*o,value:a[p[m]]}}this.calOutLier(i),this.calOutLier(n),this.InitView()},ChangeAcceleration:function(t){this.isAcceleration=t,this.isAcceleration||(this.focusTimeLineViewScale=1)},InitVariables:function(){this.doc=s.default.select(this.$el),this.titleHeight=this.doc.select(".mdl-card__title").node().clientHeight,this.width=this.doc.node().clientWidth,this.viewInnerWidth=this.width,this.height=this.doc.node().clientHeight-this.titleHeight,this.contextTimeLineHeight=.1*this.height,this.viewInnerHeight=.15*this.height,this.svg=this.doc.select("svg.screen-scroll-svg").attr("height",this.viewInnerHeight),this.svg.append("rect").attr({class:"svg-background",x:0,y:0,width:this.width,height:this.viewInnerHeight}),this.center=[.5*this.viewInnerWidth,.5*this.viewInnerHeight],this.contextTimeLineY=0,this.contextXscale=s.default.time.scale(),this.contextBarChartYscale=s.default.scale.linear().range([0,this.contextTimeLineHeight]),this.focusXscale=s.default.time.scale(),this.arcGen=s.default.svg.arc().innerRadius(0).outerRadius(200).startAngle(0).endAngle(2*Math.PI),this.timelineChartLineGen=s.default.svg.line().interpolate("monotone").tension(.8).x(function(t){return t.x}).y(function(t){return t.y}),this.dateFormat=s.default.time.format("%b %d"),this.timeFormat=s.default.time.format("%H:%M"),
this.brush=s.default.svg.brush().x(this.contextXscale)},drawDigitalClock:function(t){this.digitalClock=t.append("g").attr("class","clock-group").attr("transform","translate("+[this.center[0],this.center[1]]+")"),this.digitalClock.append("line").attr({x1:-150,y1:20,y2:20,x2:150}),this.digitalClock.append("text").attr({class:"date"}).text("TEST"),this.digitalClock.append("text").attr({class:"time",y:85}).text("TEST")},drawFisheyeContextTimeLine:function(t){var e=this,i=this.focusRegionWidth,n=this.focusRegionScale;this.contextXscale.range([this.center[0]+.5*i,this.width-this.padding.right]);var a=this.contextXscale(this.contextXscale.domain()[0].getTime()+this.timeInterval.ms)-this.contextXscale(this.contextXscale.domain()[0].getTime());this.focusMoveRange=1*a,this.contextXscale.range([this.contextXscale.range()[0]+this.focusMoveRange,this.contextXscale.range()[1]+this.focusMoveRange]),this.contextTimeLineG=this.svg.append("g").attr("class","time-line-context-group").attr("transform","translate("+[0,0]+")");for(var r=s.default.range(this.contextXscale.range()[1]-this.contextXscale.range()[0]).map(function(t,i){return{ox:t+e.contextXscale.range()[0],x:t+e.contextXscale.range()[0],y:0}}),o=0,c=t.outliers.length;o<c;++o){var l=t.outliers[o],h=Math.floor(this.contextXscale(l.ts)-this.contextXscale.range()[0]);r[h]&&l.isOutlier&&(r[h].isOutlier=!0)}r=r.filter(function(t,e){return!!t.isOutlier||!(3&e)});for(var u=0,d=r.length;u<d;){var f=r[u];if(f.isOutlier){for(var p=u-3;++p<u+4;)r[p]&&(r[p].y=.5*this.contextBarChartYscale.range()[1]);u+=4}else 1&u?f.y=0:f.y=this.contextTimeLineHeight-this.padding.bottom,++u}this.timelineChartData=r,this.contextTimeLineG.append("g").attr("class","time-line-chart").attr("transform","translate(0,"+(this.viewInnerHeight-this.padding.bottom-this.contextTimeLineHeight+5)+")").datum(r).append("path").attr("d",this.timelineChartLineGen),this.contextTimeLineG.append("g").attr("class","bar-chart-group").selectAll(".bar-chart").data(t,function(t){return t.ts}).enter().append("rect").attr({class:function(t){return"number"==typeof t.siso?"bar-chart siso":"bar-chart"},x:function(t){return e.contextXscale(t.ts)-.5},y:function(t){return e.viewInnerHeight-e.padding.bottom-e.contextBarChartYscale(t.value.length)},height:function(t){return e.contextBarChartYscale(t.value.length)},width:1}),this.contextTimeLineG.append("g").attr("class","brush").append("rect").attr({x:this.center[0]-.5*(i+n),width:i,y:this.viewInnerHeight-this.contextTimeLineHeight-this.padding.bottom,height:this.contextTimeLineHeight});var m=this.contextTimeLineG.append("g").attr("class","indicator-group").selectAll(".indicator").data(t.outliersStatics,function(t){return t.ts}).enter().append("g").attr({class:"indicator",transform:function(t){return"translate("+[e.contextXscale(t.ts),e.viewInnerHeight-e.padding.bottom+2]+")"}});m.append("rect").attr({x:-8,width:16,height:9}),m.selectAll("circle").data(function(t){return t.indicatorData}).enter().append("circle").attr({class:function(t){return t?t.type:"zero_"},r:2,cy:4.5,cx:function(t,e){return 5*e-5}}),this.contextTimeLineG.select(".indicator-group").append("line").attr({class:"move-indicator",x1:this.center[0],x2:this.center[0],y1:this.viewInnerHeight-this.contextTimeLineHeight-this.padding.bottom,y2:this.viewInnerHeight-this.padding.bottom}).style({stroke:"red","stroke-width":"1px","stroke-opacity":.5}),this.contextTimeLineG.append("g").attr("class","legend-group").selectAll("text").data([0,1,2,3,4]).enter().append("text").attr({x:function(t,i){var n=e.contextXscale.domain()[0].getTime()+(e.contextXscale.domain()[1].getTime()-e.contextXscale.domain()[0].getTime())*i*.25;return e.contextXscale(n)-7},y:this.viewInnerHeight-this.padding.bottom+10}).text(function(t,i){var n=e.contextXscale.domain()[0].getTime()+(e.contextXscale.domain()[1].getTime()-e.contextXscale.domain()[0].getTime())*i*.25;return e.dateFormat(new Date(n))})},InitView:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;console.log("init view"),this.animation&&this.animation.interrupt(),this.focusTimeLineViewScale=1,this.focusDataScale=1;var e=this.clickData[this.selectedVideo],i=e.clickDataGroupByTimeArray[1],n=e.clickDataGroupByTimeArray[this.zoomScaleMax];this.calOutLier(i),this.calOutLier(n);for(var a=0,r=i.length;a<r;++a)i[a].firstDrop=!0;for(var o=0,c=n.length;o<c;++o)n[o].firstDrop=!0;switch(t){case"middle":this.contextTimeLineY=.9*this.center[1],this.$refs.bubbleFloatComponent.setPosition(0,this.padding.bottom+10).setSize([this.viewInnerWidth,.8*this.height]);break;case"down":this.contextTimeLineY=.8*this.height,this.$refs.bubbleFloatComponent.setPosition(0,30).setSize([this.viewInnerWidth,.7*this.height]);break;default:this.contextTimeLineY=this.padding.top,this.$refs.bubbleFloatComponent.setPosition(0,this.viewInnerHeight+this.titleHeight).setSize([this.viewInnerWidth,this.height-this.viewInnerHeight])}this.zoomInView=[this.center[0],this.halfTimeLineHeight,this.viewInnerWidth],this.zoomOutView=[this.center[0],this.timeLineHeight,2*this.viewInnerWidth],this.focusXscale.range([this.padding.left,this.width-this.padding.right]).domain([s.default.time.hour.offset(this.xDomainMin,-5),s.default.time.hour.offset(this.xDomainMin,5)]),this.contextTimeLineG&&this.contextTimeLineG.selectAll("*").remove(),this.svg.select("defs").selectAll("*").remove(),this.drawFisheyeContextTimeLine(i),this.zoomIn=!1,this.focusTimeLineViewScale=1;this.$refs.bubbleFloatComponent.drawStackChart(t,this.selectedVideo).start(),this.animation=s.default.select("svg.screen-scroll-svg"),this.AnimationFisheyeTick(this.baseDuration)},AnimationUpdateDigitalClock:function(t){this.digitalClock&&("number"!=typeof t&&"string"!=typeof t||(t=new Date(t)),this.digitalClock.select("text.date").text(this.dateFormat(t)),this.digitalClock.select("text.time").text(this.timeFormat(t)))},AnimationFisheyeTick:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear",n=!1;this.animation.transition().duration(t).ease(i).each("interrupt",function(){console.log("interrupt"),e.contextTimeLineG.selectAll(".bar-chart").interrupt().transition(),e.contextTimeLineG.select(".time-line-chart").interrupt().transition(),e.contextTimeLineG.selectAll("circle.indicator").interrupt().transition(),e.contextTimeLineG.interrupt().transition(),e.contextTimeLineG.select(".legend-group").selectAll("text").interrupt().transition(),n=!0}).each(function(){var t=e,i=e.focusRegionWidth,n=e.contextXscale,a=e.focusRegionScale,r=.5*i/a,o=e.center[0],c=e.center[0]+.5*i,l=c-i/a,h=e.contextXscale.range(),u=e.focusMoveRange,d=[h[0]-u,h[1]-u];if(d[1]<=l)return e.animation.interrupt(),void e.$refs.bubbleFloatComponent.canBeFinished(!0);e.contextTimeLineG.selectAll(".bar-chart").transition().tween("x",function(e){var h=s.default.interpolateNumber(0,u),d=n(e.ts)-.5;return function(n){var u=d-h(n);u<c?u>l?(u=c-(.5+c-u)*a,s.default.select(this).attr("width",r).attr("x",u),u<o&&e.firstDrop&&(e.firstDrop=!1,t.$refs.bubbleFloatComponent.inputClicks(e.value,e).drawClicks())):(u=u-.5*a-(1-1/a)*i,s.default.select(this).attr("width",1).attr("x",u)):s.default.select(this).attr("width",1).attr("x",u)}}),e.contextTimeLineG.select(".time-line-chart").select("path").transition().attrTween("d",function(t,n,r){var o=s.default.interpolateNumber(0,u),h=0;return function(t){for(var n=o(t),r=0;r<e.timelineChartData.length;++r){var s=e.timelineChartData[r];s.ox-=n-h,s.ox<c?s.ox>l?s.x=c-(c-s.ox)*a:s.x=s.ox-.5*a-(1-1/a)*i:s.x=s.ox}return h=n,e.timelineChartLineGen(e.timelineChartData)}}),e.contextTimeLineG.transition().tween("centerTime",function(){var t=s.default.interpolateNumber(0,u);return function(i){var n=t(i),r=c-(c-e.center[0])/a;e.AnimationUpdateDigitalClock(e.contextXscale.invert(r+n)),e.$refs.bubbleFloatComponent.AnimationUpdateDigitalClock(e.contextXscale.invert(r+n))}});var f=e.viewInnerHeight-e.padding.bottom+2;e.contextTimeLineG.select("g.indicator-group").selectAll(".indicator").transition().tween("cx",function(t){var e=s.default.interpolateNumber(0,u),r=n(t.ts);return function(t){var n=r-e(t);n<c?n>l?s.default.select(this).attr("transform","translate("+[c-(.875+c-n)*a,f]+")"):s.default.select(this).attr("transform","translate("+[n-.5*a-(1-1/a)*i,f]+")"):s.default.select(this).attr("transform","translate("+[n,f]+")")}}),e.contextTimeLineG.select(".legend-group").selectAll("text").transition().tween("x",function(t,r){var o=s.default.interpolateNumber(0,u),h=n.domain()[0].getTime()+(n.domain()[1].getTime()-n.domain()[0].getTime())*r*.25;return h=e.contextXscale(h),function(t){var e=h-o(t);e<c?e>l?s.default.select(this).attr("x",c-(.25+c-e)*a):s.default.select(this).attr("x",e-(1-1/a)*i):s.default.select(this).attr("x",e)}}),e.contextXscale.range(d);var p=e.clickData[e.selectedVideo].clickDataGroupByTimeArray[e.focusTimeLineViewScale];e.zoomIn=!1;for(var m=0,v=p.outliers.length;m<v;++m){var g=e.contextXscale(p.outliers[m].ts);g<=c&&g>l&&(e.zoomIn=!0)}}).transition().duration(10).each("end",function(){if(!n&&e.focusXscale.domain()[1]<e.xDomainMax)if(e.isAcceleration&&!e.zoomIn)switch(e.accelerateMode){case"domain":e.focusTimeLineViewScale=e.zoomScaleMax,e.AccelerateByDomain(e.zoomScaleMax),e.$refs.bubbleFloatComponent.accelerateBallsDropping(e.zoomScaleMax);break;case"screen":e.zoomIn=!0,e.focusDataScale=e.focusTimeLineViewScale=e.zoomScaleMax,e.zoomOutView=[e.zoomInView[0]+.5*e.viewInnerWidth,e.timeLineHeight,e.viewInnerWidth*e.focusTimeLineViewScale],e.AccelerateByScreen(t,e.zoomInView,e.zoomOutView)}else if(e.isAcceleration&&e.zoomIn)switch(e.accelerateMode){case"domain":e.focusTimeLineViewScale=1,e.AccelerateByDomain(1),e.$refs.bubbleFloatComponent.accelerateBallsDropping(1);break;case"screen":e.zoomIn=!1,e.focusDataScale=e.focusTimeLineViewScale=1,e.zoomInView=[e.zoomOutView[0]+.5*e.viewInnerWidth,.5*e.timeLineHeight,e.viewInnerWidth*e.focusTimeLineViewScale],e.AccelerateByScreen(t,e.zoomOutView,e.zoomInView)}else e.AnimationFisheyeTick(t)})},Pause:function(){console.log("pause"),this.animation.interrupt(),this.$refs.bubbleFloatComponent.pause()},Resume:function(){this.AnimationFisheyeTick(this.baseDuration),this.$refs.bubbleFloatComponent.resume()},AccelerateByDomain:function(t){var e=this.baseDuration/t,i=this.baseDuration/(1!=t?1:this.zoomScaleMax),n=.2*(e-i);this.currentDuration!=e&&(this.currentDuration+=n),this.AnimationFisheyeTick(this.currentDuration)},AccelerateByScreen:function(t,e,i){console.log("accelerate by screen"),this.animation.interrupt(),this.selectVideoDisabled=!0;var n=this.focusXscale.copy(),a=.5*i[2];this.focusXscale.domain([i[0]-a,i[0]+a].map(n.invert)),this.selectVideoDisabled=!1,this.AnimationTick(t)}}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(9),r=n(a),o=i(12),s=n(o),c=i(31);n(c);i(30);var l=i(32),h=n(l),u=i(33);n(u);e.default={components:{BubbleFloat:h.default},ready:function(){this.InitVariables(),console.log("ready no-ball-drop"),this.clickData||this.$root.getData()},doc:null,svg:null,contextTimeLineG:null,timelineChartData:null,timelineChartLineGen:null,animation:null,digitalClock:null,focusXscale:null,contextXscale:null,contextBarChartYscale:null,arcGen:null,brush:null,dateFormat:null,timeFormat:null,clickData:null,data:function(){return{padding:{top:0,right:50,bottom:30,left:50},width:null,height:null,center:null,titleHeight:null,viewInnerWidth:null,viewInnerHeight:null,contextTimeLineHeight:null,contextTimeLineY:null,stackBarChartHeight:300,zoomScaleMax:8,focusTimeLineViewScale:1,focusDataScale:1,isAcceleration:!0,accelerateMode:"domain",selectedVideo:"",baseDuration:1e3,currentDuration:1e3,timeInterval:{name:"Hour",ms:36e5},xDomainMin:null,xDomainMax:null}},methods:{setRawdata:function(t,e){this.clickData={};for(var i=this.zoomScaleMax*this.timeInterval.ms,n=0,a=t.length;n<a;++n)if(0!==t[n].currentTime){t[n].date=new Date(t[n].ts);var o=t[n].videoId;this.clickData[o]||(this.clickData[o]={});var s=this.clickData[o];s.clickDataGroupByTimeArray||(s.clickDataGroupByTimeArray={}),s.clickDataGroupByTimeDict||(s.clickDataGroupByTimeDict={}),s.clickDataGroupByTimeArray[this.focusTimeLineViewScale]||(s.clickDataGroupByTimeArray[this.focusTimeLineViewScale]=[]),s.clickDataGroupByTimeDict[this.focusTimeLineViewScale]||(s.clickDataGroupByTimeDict[this.focusTimeLineViewScale]={}),s.clickDataGroupByTimeArray[this.zoomScaleMax]||(s.clickDataGroupByTimeArray[this.zoomScaleMax]=[]),s.clickDataGroupByTimeDict[this.zoomScaleMax]||(s.clickDataGroupByTimeDict[this.zoomScaleMax]={});var c=Math.floor(t[n].ts/this.timeInterval.ms);s.clickDataGroupByTimeDict[this.focusTimeLineViewScale][c]||(s.clickDataGroupByTimeDict[this.focusTimeLineViewScale][c]=[]),s.clickDataGroupByTimeDict[this.focusTimeLineViewScale][c].push(t[n]),c=Math.floor(t[n].ts/i),s.clickDataGroupByTimeDict[this.zoomScaleMax][c]||(s.clickDataGroupByTimeDict[this.zoomScaleMax][c]=[]),s.clickDataGroupByTimeDict[this.zoomScaleMax][c].push(t[n])}for(var l=(0,r.default)(this.clickData),h=0,u=l.length;h<u;++h){for(var d=this.clickData[l[h]],f=(0,r.default)(d.clickDataGroupByTimeDict[this.focusTimeLineViewScale]),p=0,m=f.length;p<m;++p)d.clickDataGroupByTimeArray[this.focusTimeLineViewScale][p]={ts:+f[p]*this.timeInterval.ms,value:d.clickDataGroupByTimeDict[this.focusTimeLineViewScale][f[p]]};f=(0,r.default)(d.clickDataGroupByTimeDict[this.zoomScaleMax]);for(var v=0,g=f.length;v<g;++v)d.clickDataGroupByTimeArray[this.zoomScaleMax][v]={ts:+f[v]*i,value:d.clickDataGroupByTimeDict[this.zoomScaleMax][f[v]]}}return this.$refs.bubbleFloatComponent.setBarHeight(this.stackBarChartHeight).setIs2D(this.is2D).setTimeInterval(30).videosData(e),l},processData:function(t){if(!t.statics){var e=s.default.extent(t,function(t){return t.value.length}),i=e[1],n=e[0],a=s.default.mean(t,function(t){return t.value.length}),r=s.default.median(t,function(t){return t.value.length}),o=s.default.deviation(t,function(t){return t.value.length});t.statics={extent:e,max:i,min:n,mean:a,median:r,deviation:o}}},calOutLier:function(t){if(!t.outliers){t.statics||this.processData(t);for(var e,i=t.statics,n=i.mean,a=i.deviation,r=2,o=n+r*a,s=n-r*a,c=[],l=0,h=t.length;l<h;++l)e=t[l].value.length,(e>o||e<s)&&(t[l].isOutlier=!0,c.push(t[l]));t.outliers=c}},SelectVideo:function(t){this.selectedVideo=t;var e=this.clickData[this.selectedVideo],i=e.clickDataGroupByTimeArray[1],n=e.clickDataGroupByTimeArray[this.zoomScaleMax];if(!n){n=e.clickDataGroupByTimeArray[this.zoomScaleMax]=[];for(var a=e.clickDataGroupByTimeDict[this.zoomScaleMax]={},o=this.timeInterval.ms*this.zoomScaleMax,c=0,l=i.length;c<l;++c)for(var h=i[c].value,u=0,d=h.length;u<d;++u){var f=h[u],p=Math.floor(f.ts/o);a[p]||(a[p]=[]),a[p].push(f)}for(var m=(0,r.default)(a),v=0,g=m.length;v<g;++v)n[v]={ts:+m[v]*o,value:a[m[v]]}}this.calOutLier(i),this.calOutLier(n),this.contextBarChartYscale.domain(i.statics.extent),this.focusXscale.domain(s.default.extent(i,function(t){return+t.ts})),this.contextXscale.domain(this.focusXscale.domain()),this.xDomainMin=this.focusXscale.domain()[0],this.xDomainMax=this.focusXscale.domain()[1],setTimeout(this.InitView,20)},SelectSpeed:function(t){this.zoomScaleMax=t;var e=this.clickData[this.selectedVideo],i=e.clickDataGroupByTimeArray[1],n=e.clickDataGroupByTimeArray[this.zoomScaleMax];if(!n){n=e.clickDataGroupByTimeArray[this.zoomScaleMax]=[];for(var a=e.clickDataGroupByTimeDict[this.zoomScaleMax]={},o=this.timeInterval.ms*this.zoomScaleMax,s=0,c=i.length;s<c;++s)for(var l=i[s].value,h=0,u=l.length;h<u;++h){var d=l[h],f=Math.floor(d.ts/o);a[f]||(a[f]=[]),a[f].push(d)}for(var p=(0,r.default)(a),m=0,v=p.length;m<v;++m)n[m]={ts:+p[m]*o,value:a[p[m]]}}this.calOutLier(i),this.calOutLier(n),this.InitView()},ChangeAcceleration:function(t){this.isAcceleration=t,this.isAcceleration||(this.focusTimeLineViewScale=1)},InitVariables:function(){this.doc=s.default.select(this.$el),this.titleHeight=this.doc.select(".mdl-card__title").node().clientHeight,this.width=this.doc.node().clientWidth,this.viewInnerWidth=this.width,this.height=this.doc.node().clientHeight-this.titleHeight,this.contextTimeLineHeight=.1*this.height,this.viewInnerHeight=.15*this.height,this.svg=this.doc.select("svg.no-foreshadow-baseline-svg").attr("height",this.viewInnerHeight),this.svg.append("rect").attr({class:"svg-background",x:0,y:0,width:this.width,height:this.viewInnerHeight}),this.center=[.5*this.viewInnerWidth,.5*this.viewInnerHeight],this.contextTimeLineY=0,this.contextXscale=s.default.time.scale(),this.contextBarChartYscale=s.default.scale.linear().range([0,this.contextTimeLineHeight]),this.focusXscale=s.default.time.scale(),this.arcGen=s.default.svg.arc().innerRadius(0).outerRadius(200).startAngle(0).endAngle(2*Math.PI),this.timelineChartLineGen=s.default.svg.line().interpolate("basis").x(function(t){return t.x}).y(function(t){return t.y}),this.dateFormat=s.default.time.format("%b %d"),this.timeFormat=s.default.time.format("%H:%M"),this.brush=s.default.svg.brush().x(this.contextXscale)},drawDigitalClock:function(t){this.digitalClock=t.append("g").attr("class","clock-group").attr("transform","translate("+[this.center[0],this.center[1]]+")"),this.digitalClock.append("line").attr({x1:-150,y1:20,y2:20,x2:150}),this.digitalClock.append("text").attr({class:"date"}).text("TEST"),this.digitalClock.append("text").attr({class:"time",y:85}).text("TEST")},InitView:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.animation&&this.animation.interrupt(),this.focusTimeLineViewScale=1,this.focusDataScale=1;var t=this.clickData[this.selectedVideo],e=t.clickDataGroupByTimeArray[1],i=t.clickDataGroupByTimeArray[this.zoomScaleMax];this.calOutLier(e),this.calOutLier(i);for(var n=0,a=e.length;n<a;++n)e[n].firstDrop=!0;for(var r=0,o=i.length;r<o;++r)i[r].firstDrop=!0;this.contextTimeLineY=this.padding.top,this.$refs.bubbleFloatComponent.setPosition(0,this.viewInnerHeight+this.titleHeight).setSize([this.viewInnerWidth,this.height-this.viewInnerHeight]),this.zoomInView=[this.center[0],this.halfTimeLineHeight,this.viewInnerWidth],this.zoomOutView=[this.center[0],this.timeLineHeight,2*this.viewInnerWidth],this.focusXscale.range([this.padding.left,this.width-this.padding.right]).domain([s.default.time.hour.offset(this.xDomainMin,-5),s.default.time.hour.offset(this.xDomainMin,5)]),this.contextTimeLineG&&this.contextTimeLineG.selectAll("*").remove(),this.svg.select("defs").selectAll("*").remove(),this.drawContextTimeLine(e),this.zoomIn=!1,this.focusTimeLineViewScale=1;this.$refs.bubbleFloatComponent.drawNoStackChart(this.selectedVideo).start(),this.animation=s.default.select("svg.no-foreshadow-baseline-svg"),this.AnimationTick(this.baseDuration)},AnimationUpdateDigitalClock:function(t){this.digitalClock&&("number"!=typeof t&&"string"!=typeof t||(t=new Date(t)),this.digitalClock.select("text.date").text(this.dateFormat(t)),this.digitalClock.select("text.time").text(this.timeFormat(t)))},drawContextTimeLine:function(t){this.contextXscale.range([this.padding.left,this.width-this.padding.right]),this.contextTimeLineG=this.svg.append("g").attr("class","time-line-context-group").attr("transform","translate("+[0,0]+")"),this.brush.x(this.contextXscale).extent(this.focusXscale.domain()),this.contextTimeLineG.append("g").attr("class","x brush").on("mousedown",function(){s.default.event.stopImmediatePropagation()}).call(this.brush).style("pointer-events","none").selectAll("rect").attr({y:this.viewInnerHeight-this.padding.bottom-this.contextTimeLineHeight,height:this.contextTimeLineHeight}),this.contextTimeLineXAxis=this.contextTimeLineG.append("g").attr("class","x axis").attr("transform","translate("+[0,this.viewInnerHeight-this.padding.bottom]+")"),this.contextTimeLineXAxis.call(s.default.svg.axis().scale(this.contextXscale).orient("top").tickSize(6,0).tickFormat(function(t){return s.default.time.format("%b %d")(t)})),this.contextTimeLineXAxis.append("circle").attr({cx:this.contextXscale.range()[0],r:10,class:"time-pivot"})},AddOffsetToDomain:function(t){var e=t.domain(),i=.2*(e[1].getTime()-e[0].getTime()),n=e[0].getTime()+i,a=e[1].getTime()+i;return a>this.xDomainMax&&(n=e[0],a=e[1]),[n,a]},AnimationTick:function(t){var e=this,i=!1;this.animation.transition().duration(t).ease("linear").each("interrupt",function(){console.log("interrupt"),i=!0}).each(function(){var t=e.focusXscale.domain(),n=t[0].getTime()+.5*(t[1].getTime()-t[0].getTime()),a=e.AddOffsetToDomain(e.focusXscale),r=a[0]+.5*(a[1]-a[0]),o=[],c=e.clickData[e.selectedVideo].clickDataGroupByTimeArray[1];e.zoomIn=!1;for(var l=0,h=c.length;l<h;++l)if(c[l].ts>=t[0]){if(!(c[l].ts<=a[1]))break;c[l].isOutlier&&(e.zoomIn=!0),o.push(c[l])}s.default.select({}).transition().tween("main",function(){var t=s.default.interpolateNumber(n,r);return function(n){if(!i){var a=t(n);e.$refs.bubbleFloatComponent.AnimationUpdateDigitalClock(a),e.contextTimeLineXAxis.select("circle").attr("cx",e.contextXscale(a));for(var r=0,s=o.length;r<s;++r)o[r].ts>a&&o[r].firstDrop&&(o[r].firstDrop=!1,e.$refs.bubbleFloatComponent.inputClicks(o[r].value,o[r]).drawClicks())}}}),e.focusXscale.domain(a),e.brush.extent(a),e.brush(e.contextTimeLineG.select(".x.brush").transition())}).transition().duration(10).each("end",function(){if(!i&&e.focusXscale.domain()[1]<e.xDomainMax)if(e.isAcceleration&&!e.zoomIn)switch(e.accelerateMode){case"domain":e.focusTimeLineViewScale=e.zoomScaleMax,e.AccelerateByDomain(e.zoomScaleMax),e.$refs.bubbleFloatComponent.accelerateBallsDropping(e.zoomScaleMax);break;case"screen":e.zoomIn=!0,e.focusTimeLineViewScale=e.zoomScaleMax,e.zoomOutView=[e.zoomInView[0]+.5*e.viewInnerWidth,e.timeLineHeight,e.viewInnerWidth*e.focusTimeLineViewScale],e.AccelerateByScreen(t,e.zoomInView,e.zoomOutView)}else if(e.isAcceleration&&e.zoomIn)switch(e.accelerateMode){case"domain":e.focusTimeLineViewScale=1,e.AccelerateByDomain(1),e.$refs.bubbleFloatComponent.accelerateBallsDropping(1);break;case"screen":e.zoomIn=!1,e.focusTimeLineViewScale=1,e.zoomInView=[e.zoomOutView[0]+.5*e.viewInnerWidth,.5*e.timeLineHeight,e.viewInnerWidth*e.focusTimeLineViewScale],e.AccelerateByScreen(t,e.zoomOutView,e.zoomInView)}else e.AnimationTick(t)})},Pause:function(){this.animation.interrupt(),this.$refs.bubbleFloatComponent.pause()},Resume:function(){this.AnimationTick(this.baseDuration),this.$refs.bubbleFloatComponent.resume()},AccelerateByDomain:function(t){var e=this.baseDuration/t,i=this.baseDuration/(1!=t?1:this.zoomScaleMax),n=.2*(e-i);this.currentDuration!=e&&(this.currentDuration+=n),this.AnimationTick(this.currentDuration)},AccelerateByScreen:function(t,e,i){this.animation.interrupt(),this.selectVideoDisabled=!0;var n=this.focusXscale.copy(),a=.5*i[2];this.focusXscale.domain([i[0]-a,i[0]+a].map(n.invert)),this.selectVideoDisabled=!1,this.AnimationTick(t)}}}},function(t,e,i){t.exports={default:i(58),__esModule:!0}},function(t,e,i){t.exports={default:i(60),__esModule:!0}},function(t,e,i){t.exports={default:i(61),__esModule:!0}},function(t,e){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var a=i(53),r=n(a);e.default=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,r.default)(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}()},function(t,e,i){i(83);var n=i(6).Object;t.exports=function(t,e,i){return n.defineProperty(t,e,i)}},function(t,e,i){i(84),t.exports=i(6).Object.keys},function(t,e,i){i(87),i(85),i(88),i(89),t.exports=i(6).Symbol},function(t,e,i){i(86),i(90),t.exports=i(29).f("iterator")},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(){}},function(t,e,i){var n=i(5),a=i(81),r=i(80);t.exports=function(t){return function(e,i,o){var s,c=n(e),l=a(c.length),h=r(o,l);if(t&&i!=i){for(;l>h;)if(s=c[h++],s!=s)return!0}else for(;l>h;h++)if((t||h in c)&&c[h]===i)return t||h||0;return!t&&-1}}},function(t,e,i){var n=i(62);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,a){return t.call(e,i,n,a)}}return function(){return t.apply(e,arguments)}}},function(t,e,i){var n=i(11),a=i(41),r=i(22);t.exports=function(t){var e=n(t),i=a.f;if(i)for(var o,s=i(t),c=r.f,l=0;s.length>l;)c.call(t,o=s[l++])&&e.push(o);return e}},function(t,e,i){t.exports=i(1).document&&document.documentElement},function(t,e,i){var n=i(35);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,i){var n=i(35);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,i){"use strict";var n=i(39),a=i(16),r=i(23),o={};i(7)(o,i(8)("iterator"),function(){return this}),t.exports=function(t,e,i){t.prototype=n(o,{next:a(1,i)}),r(t,e+" Iterator")}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,i){var n=i(11),a=i(5);t.exports=function(t,e){for(var i,r=a(t),o=n(r),s=o.length,c=0;s>c;)if(r[i=o[c++]]===e)return i}},function(t,e,i){var n=i(17)("meta"),a=i(15),r=i(3),o=i(4).f,s=0,c=Object.isExtensible||function(){return!0},l=!i(10)(function(){return c(Object.preventExtensions({}))}),h=function(t){o(t,n,{value:{i:"O"+ ++s,w:{}}})},u=function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,n)){if(!c(t))return"F";if(!e)return"E";h(t)}return t[n].i},d=function(t,e){if(!r(t,n)){if(!c(t))return!0;if(!e)return!1;h(t)}return t[n].w},f=function(t){return l&&p.NEED&&c(t)&&!r(t,n)&&h(t),t},p=t.exports={KEY:n,NEED:!1,fastKey:u,getWeak:d,onFreeze:f}},function(t,e,i){var n=i(4),a=i(13),r=i(11);t.exports=i(2)?Object.defineProperties:function(t,e){a(t);for(var i,o=r(e),s=o.length,c=0;s>c;)n.f(t,i=o[c++],e[i]);return t}},function(t,e,i){var n=i(22),a=i(16),r=i(5),o=i(27),s=i(3),c=i(37),l=Object.getOwnPropertyDescriptor;e.f=i(2)?l:function(t,e){if(t=r(t),e=o(e,!0),c)try{return l(t,e)}catch(t){}if(s(t,e))return a(!n.f.call(t,e),t[e])}},function(t,e,i){var n=i(5),a=i(40).f,r={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return a(t)}catch(t){return o.slice()}};t.exports.f=function(t){return o&&"[object Window]"==r.call(t)?s(t):a(n(t))}},function(t,e,i){var n=i(3),a=i(44),r=i(24)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=a(t),n(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},function(t,e,i){var n=i(14),a=i(6),r=i(10);t.exports=function(t,e){var i=(a.Object||{})[t]||Object[t],o={};o[t]=e(i),n(n.S+n.F*r(function(){i(1)}),"Object",o)}},function(t,e,i){var n=i(26),a=i(18);t.exports=function(t){return function(e,i){var r,o,s=String(a(e)),c=n(i),l=s.length;return c<0||c>=l?t?"":void 0:(r=s.charCodeAt(c),r<55296||r>56319||c+1===l||(o=s.charCodeAt(c+1))<56320||o>57343?t?s.charAt(c):r:t?s.slice(c,c+2):(r-55296<<10)+(o-56320)+65536)}}},function(t,e,i){var n=i(26),a=Math.max,r=Math.min;t.exports=function(t,e){return t=n(t),t<0?a(t+e,0):r(t,e)}},function(t,e,i){var n=i(26),a=Math.min;t.exports=function(t){return t>0?a(n(t),9007199254740991):0}},function(t,e,i){"use strict";var n=i(63),a=i(71),r=i(20),o=i(5);t.exports=i(38)(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,a(1)):"keys"==e?a(0,i):"values"==e?a(0,t[i]):a(0,[i,t[i]])},"values"),r.Arguments=r.Array,n("keys"),n("values"),n("entries")},function(t,e,i){var n=i(14);n(n.S+n.F*!i(2),"Object",{defineProperty:i(4).f})},function(t,e,i){var n=i(44),a=i(11);i(78)("keys",function(){return function(t){return a(n(t))}})},function(t,e){},function(t,e,i){"use strict";var n=i(79)(!0);i(38)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})})},function(t,e,i){"use strict";var n=i(1),a=i(3),r=i(2),o=i(14),s=i(43),c=i(73).KEY,l=i(10),h=i(25),u=i(23),d=i(17),f=i(8),p=i(29),m=i(28),v=i(72),g=i(66),y=i(69),x=i(13),b=i(5),k=i(27),w=i(16),T=i(39),C=i(76),D=i(75),A=i(4),S=i(11),_=D.f,L=A.f,M=C.f,G=n.Symbol,H=n.JSON,I=H&&H.stringify,B="prototype",V=f("_hidden"),P=f("toPrimitive"),O={}.propertyIsEnumerable,F=h("symbol-registry"),X=h("symbols"),z=h("op-symbols"),R=Object[B],$="function"==typeof G,E=n.QObject,W=!E||!E[B]||!E[B].findChild,j=r&&l(function(){return 7!=T(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a})?function(t,e,i){var n=_(R,e);n&&delete R[e],L(t,e,i),n&&t!==R&&L(R,e,n)}:L,N=function(t){var e=X[t]=T(G[B]);return e._k=t,e},Y=$&&"symbol"==typeof G.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof G},U=function(t,e,i){return t===R&&U(z,e,i),x(t),e=k(e,!0),x(i),a(X,e)?(i.enumerable?(a(t,V)&&t[V][e]&&(t[V][e]=!1),i=T(i,{enumerable:w(0,!1)})):(a(t,V)||L(t,V,w(1,{})),t[V][e]=!0),j(t,e,i)):L(t,e,i)},q=function(t,e){x(t);for(var i,n=g(e=b(e)),a=0,r=n.length;r>a;)U(t,i=n[a++],e[i]);return t},Q=function(t,e){return void 0===e?T(t):q(T(t),e)},J=function(t){var e=O.call(this,t=k(t,!0));return!(this===R&&a(X,t)&&!a(z,t))&&(!(e||!a(this,t)||!a(X,t)||a(this,V)&&this[V][t])||e)},K=function(t,e){if(t=b(t),e=k(e,!0),t!==R||!a(X,e)||a(z,e)){var i=_(t,e);return!i||!a(X,e)||a(t,V)&&t[V][e]||(i.enumerable=!0),i}},Z=function(t){for(var e,i=M(b(t)),n=[],r=0;i.length>r;)a(X,e=i[r++])||e==V||e==c||n.push(e);return n},tt=function(t){for(var e,i=t===R,n=M(i?z:b(t)),r=[],o=0;n.length>o;)!a(X,e=n[o++])||i&&!a(R,e)||r.push(X[e]);return r};$||(G=function(){if(this instanceof G)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(i){this===R&&e.call(z,i),a(this,V)&&a(this[V],t)&&(this[V][t]=!1),j(this,t,w(1,i))};return r&&W&&j(R,t,{configurable:!0,set:e}),N(t)},s(G[B],"toString",function(){return this._k}),D.f=K,A.f=U,i(40).f=C.f=Z,i(22).f=J,i(41).f=tt,r&&!i(21)&&s(R,"propertyIsEnumerable",J,!0),p.f=function(t){return N(f(t))}),o(o.G+o.W+o.F*!$,{Symbol:G});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),it=0;et.length>it;)f(et[it++]);for(var et=S(f.store),it=0;et.length>it;)m(et[it++]);o(o.S+o.F*!$,"Symbol",{for:function(t){return a(F,t+="")?F[t]:F[t]=G(t)},keyFor:function(t){if(Y(t))return v(F,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){W=!0},useSimple:function(){W=!1}}),o(o.S+o.F*!$,"Object",{create:Q,defineProperty:U,defineProperties:q,getOwnPropertyDescriptor:K,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),H&&o(o.S+o.F*(!$||l(function(){var t=G();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!Y(t)){for(var e,i,n=[t],a=1;arguments.length>a;)n.push(arguments[a++]);return e=n[1],"function"==typeof e&&(i=e),!i&&y(e)||(e=function(t,e){if(i&&(e=i.call(this,t,e)),!Y(e))return e}),n[1]=e,I.apply(H,n)}}}),G[B][P]||i(7)(G[B],P,G[B].valueOf),u(G,"Symbol"),u(Math,"Math",!0),u(n.JSON,"JSON",!0)},function(t,e,i){i(28)("asyncIterator")},function(t,e,i){i(28)("observable")},function(t,e,i){i(82);for(var n=i(1),a=i(7),r=i(20),o=i(8)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],c=0;c<5;c++){var l=s[c],h=n[l],u=h&&h.prototype;u&&!u[o]&&a(u,o,l),r[l]=r.Array}},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,,function(t,e){t.exports=" <div class=bubble-float></div> "},function(t,e){t.exports=' <div class="no-foreshadow-baseline mdl-card mdl-shadow--3dp mdl-cell mdl-cell--12-col" _v-24f243ef=""> <div class=mdl-card__title _v-24f243ef=""> <h2 class=mdl-card__title-text _v-24f243ef="">Video-{{selectedVideo}}</h2> </div> <svg class=no-foreshadow-baseline-svg _v-24f243ef=""></svg> <div class="mdl-card__actions mdl-card--border" _v-24f243ef=""> </div> <bubble-float v-ref:bubble-float-component="" _v-24f243ef=""></bubble-float> </div>';
},function(t,e){t.exports=' <div class="conglei mdl-card mdl-shadow--3dp mdl-cell mdl-cell--12-col" _v-5d610277=""> <div class=mdl-card__title _v-5d610277=""> <h2 class=mdl-card__title-text _v-5d610277="">Video-{{selectedVideo}}</h2> </div> <svg class=conglei-svg _v-5d610277=""></svg> <bubble-float v-ref:bubble-float-component="" _v-5d610277=""></bubble-float> </div>'},function(t,e){t.exports=' <div class="screen-scroll mdl-card mdl-shadow--3dp mdl-cell mdl-cell--12-col" _v-613ff422=""> <div class=mdl-card__title _v-613ff422=""> <h2 class=mdl-card__title-text _v-613ff422="">Video-{{selectedVideo}}</h2> </div> <svg class=screen-scroll-svg _v-613ff422=""></svg> <div class="mdl-card__actions mdl-card--border" _v-613ff422=""> </div> <bubble-float v-ref:bubble-float-component="" _v-613ff422=""></bubble-float> </div>'},function(t,e){t.exports='<div class="mdl-layout mdl-js-layout" _v-81cd484e=""> <header class="mdl-layout__header mdl-layout__header--scroll" _v-81cd484e=""> <div class=mdl-layout__header-row _v-81cd484e=""> <span class=mdl-layout-title _v-81cd484e="">Videos</span> <div class=mdl-layout-spacer _v-81cd484e=""></div> <nav class=mdl-navigation _v-81cd484e=""> <a class=mdl-navigation__link v-link=vLinkIndex _v-81cd484e="">Ours</a> <a class=mdl-navigation__link v-link=vLinkCongleiPath _v-81cd484e="">Conglei\'s</a> <a class=mdl-navigation__link v-link=vLinkNoForeshadow _v-81cd484e="">No ForeShadow</a> </nav> </div> </header> <div class=mdl-layout__drawer _v-81cd484e=""> <span class=mdl-layout-title _v-81cd484e="">Videos</span> <nav class=mdl-navigation _v-81cd484e=""> <label class=mdl-navigation__link _v-81cd484e="">Video <select v-model=selectedVideo @change=SelectVideo :disabled=selectVideoDisabled _v-81cd484e=""> <option v-for="id in videoIds" :value=id _v-81cd484e=""> {{ id }} </option> </select> </label> <label class=mdl-navigation__link _v-81cd484e="">Speed X <select v-model=zoomScaleMax @change=SelectSpeed :disabled=selectVideoDisabled _v-81cd484e=""> <option v-for="speed in zoomScaleList" :value=speed _v-81cd484e=""> {{ speed }} </option> </select> </label> <label class=mdl-navigation__link _v-81cd484e=""> <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for=isAcceleration _v-81cd484e=""> <input type=checkbox id=isAcceleration class=mdl-switch__input v-model=isAcceleration @change=ChangeAcceleration _v-81cd484e=""> <span class=mdl-switch__label _v-81cd484e="">Accerleration</span> </label> </label> <label class=mdl-navigation__link for=btn-play _v-81cd484e=""> <button id=btn-play class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent mdl-color-text--grey-800" type=button @click=Resume _v-81cd484e=""> Play </button> </label> <label class=mdl-navigation__link for=btn-Pause _v-81cd484e=""> <button id=btn-Pause class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect" type=button @click=Pause _v-81cd484e=""> Pause </button> </label> <label class=mdl-navigation__link _v-81cd484e=""> <hr _v-81cd484e=""> </label> </nav> </div> <main class=mdl-layout__content _v-81cd484e=""> <div class=page-content _v-81cd484e=""> <router-view v-ref:click-animation-component="" _v-81cd484e=""> </router-view> </div> </main> </div>'},function(t,e,i){var n,a,r={};i(91),i(99),n=i(48),a=i(106),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports.default);var o="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;a&&(o.template=a),o.computed||(o.computed={}),Object.keys(r).forEach(function(t){var e=r[t];o.computed[t]=function(){return e}})},function(t,e,i){var n,a,r={};i(93),i(97),n=i(50),a=i(104),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports.default);var o="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;a&&(o.template=a),o.computed||(o.computed={}),Object.keys(r).forEach(function(t){var e=r[t];o.computed[t]=function(){return e}})},function(t,e,i){var n,a,r={};i(95),i(96),n=i(52),a=i(103),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports.default);var o="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;a&&(o.template=a),o.computed||(o.computed={}),Object.keys(r).forEach(function(t){var e=r[t];o.computed[t]=function(){return e}})},function(t,e,i){/*!
	 * vue-router v0.7.13
	 * (c) 2016 Evan You
	 * Released under the MIT License.
	 */
!function(e,i){t.exports=i()}(this,function(){"use strict";function t(t,e,i){this.path=t,this.matcher=e,this.delegate=i}function e(t){this.routes={},this.children={},this.target=t}function i(e,n,a){return function(r,o){var s=e+r;return o?void o(i(s,n,a)):new t(e+r,n,a)}}function n(t,e,i){for(var n=0,a=0,r=t.length;a<r;a++)n+=t[a].path.length;e=e.substr(n);var o={path:e,handler:i};t.push(o)}function a(t,e,i,r){var o=e.routes;for(var s in o)if(o.hasOwnProperty(s)){var c=t.slice();n(c,s,o[s]),e.children[s]?a(c,e.children[s],i,r):i.call(r,c)}}function r(t,n){var r=new e;t(i("",r,this.delegate)),a([],r,function(t){n?n(this,t):this.add(t)},this)}function o(t){j||"undefined"==typeof console||console.error("[vue-router] "+t)}function s(t,e){try{return e?decodeURIComponent(t):decodeURI(t)}catch(i){o("malformed URI"+(e?" component: ":": ")+t)}}function c(t){return"[object Array]"===Object.prototype.toString.call(t)}function l(t){this.string=t}function h(t){this.name=t}function u(t){this.name=t}function d(){}function f(t,e,i){"/"===t.charAt(0)&&(t=t.substr(1));var n=t.split("/"),a=[];i.val="";for(var r=0,o=n.length;r<o;r++){var s,c=n[r];(s=c.match(/^:([^\/]+)$/))?(a.push(new h(s[1])),e.push(s[1]),i.val+="3"):(s=c.match(/^\*([^\/]+)$/))?(a.push(new u(s[1])),i.val+="2",e.push(s[1])):""===c?(a.push(new d),i.val+="1"):(a.push(new l(c)),i.val+="4")}return i.val=+i.val,a}function p(t){this.charSpec=t,this.nextStates=[]}function m(t){return t.sort(function(t,e){return e.specificity.val-t.specificity.val})}function v(t,e){for(var i=[],n=0,a=t.length;n<a;n++){var r=t[n];i=i.concat(r.match(e))}return i}function g(t){this.queryParams=t||{}}function y(t,e,i){for(var n=t.handlers,a=t.regex,r=e.match(a),o=1,s=new g(i),c=0,l=n.length;c<l;c++){for(var h=n[c],u=h.names,d={},f=0,p=u.length;f<p;f++)d[u[f]]=r[o++];s.push({handler:h.handler,params:d,isDynamic:!!u.length})}return s}function x(t,e){return e.eachChar(function(e){t=t.put(e)}),t}function b(t){return t=t.replace(/\+/gm,"%20"),s(t,!0)}function k(t){"undefined"!=typeof console&&console.error("[vue-router] "+t)}function w(t,e,i){var n=t.match(/(\?.*)$/);if(n&&(n=n[1],t=t.slice(0,-n.length)),"?"===e.charAt(0))return t+e;var a=t.split("/");i&&a[a.length-1]||a.pop();for(var r=e.replace(/^\//,"").split("/"),o=0;o<r.length;o++){var s=r[o];"."!==s&&(".."===s?a.pop():a.push(s))}return""!==a[0]&&a.unshift(""),a.join("/")}function T(t){return t&&"function"==typeof t.then}function C(t,e){var i=t&&(t.$options||t.options);return i&&i.route&&i.route[e]}function D(t,e){Q?Q.$options.components._=t.component:Q={resolve:q.Vue.prototype._resolveComponent,$options:{components:{_:t.component}}},Q.resolve("_",function(i){t.component=i,e(i)})}function A(t,e,i){return void 0===e&&(e={}),t=t.replace(/:([^\/]+)/g,function(i,n){var a=e[n];return a||k('param "'+n+'" not found when generating path for "'+t+'" with params '+JSON.stringify(e)),a||""}),i&&(t+=U(i)),t}function S(t,e,i){var n=t.childVM;if(!n||!e)return!1;if(t.Component!==e.component)return!1;var a=C(n,"canReuse");return"boolean"==typeof a?a:!a||a.call(n,{to:i.to,from:i.from})}function _(t,e,i){var n=t.childVM,a=C(n,"canDeactivate");a?e.callHook(a,n,i,{expectBoolean:!0}):i()}function L(t,e,i){D(t,function(t){if(!e.aborted){var n=C(t,"canActivate");n?e.callHook(n,null,i,{expectBoolean:!0}):i()}})}function M(t,e,i){var n=t.childVM,a=C(n,"deactivate");a?e.callHooks(a,n,i):i()}function G(t,e,i,n,a){var r=e.activateQueue[i];if(!r)return B(t),t._bound&&t.setComponent(null),void(n&&n());var o=t.Component=r.component,s=C(o,"activate"),c=C(o,"data"),l=C(o,"waitForData");t.depth=i,t.activated=!1;var h=void 0,u=!(!c||l);if(a=a&&t.childVM&&t.childVM.constructor===o)h=t.childVM,h.$loadingRouteData=u;else if(B(t),t.unbuild(!0),h=t.build({_meta:{$loadingRouteData:u},created:function(){this._routerView=t}}),t.keepAlive){h.$loadingRouteData=u;var d=h._keepAliveRouterView;d&&(t.childView=d,h._keepAliveRouterView=null)}var f=function(){h.$destroy()},p=function(){if(a)return void(n&&n());var i=e.router;i._rendered||i._transitionOnLoad?t.transition(h):(t.setCurrent?t.setCurrent(h):t.childVM=h,h.$before(t.anchor,null,!1)),n&&n()},m=function(){t.childView&&G(t.childView,e,i+1,null,a||t.keepAlive),p()},v=function(){t.activated=!0,c&&l?I(h,e,c,m,f):(c&&I(h,e,c),m())};s?e.callHooks(s,h,v,{cleanup:f,postActivate:!0}):v()}function H(t,e){var i=t.childVM,n=C(i,"data");n&&I(i,e,n)}function I(t,e,i,n,a){t.$loadingRouteData=!0,e.callHooks(i,t,function(){t.$loadingRouteData=!1,t.$emit("route-data-loaded",t),n&&n()},{cleanup:a,postActivate:!0,processData:function(e){var i=[];if(V(e)&&Object.keys(e).forEach(function(n){var a=e[n];T(a)?i.push(a.then(function(e){t.$set(n,e)})):t.$set(n,a)}),i.length)return i[0].constructor.all(i)}})}function B(t){t.keepAlive&&t.childVM&&t.childView&&(t.childVM._keepAliveRouterView=t.childView),t.childView=null}function V(t){return"[object Object]"===Object.prototype.toString.call(t)}function P(t){return"[object Object]"===Object.prototype.toString.call(t)}function O(t){return t?Array.prototype.slice.call(t):[]}function F(t){var e=t.util,i=e.extend,n=e.isArray,a=e.defineReactive,r=t.prototype._init;t.prototype._init=function(t){t=t||{};var e=t._parent||t.parent||this,i=e.$router,n=e.$route;i&&(this.$router=i,i._children.push(this),this._defineMeta?this._defineMeta("$route",n):a(this,"$route",n)),r.call(this,t)};var o=t.prototype._destroy;t.prototype._destroy=function(){!this._isBeingDestroyed&&this.$router&&this.$router._children.$remove(this),o.apply(this,arguments)};var s=t.config.optionMergeStrategies,c=/^(data|activate|deactivate)$/;s&&(s.route=function(t,e){if(!e)return t;if(!t)return e;var a={};i(a,t);for(var r in e){var o=a[r],s=e[r];o&&c.test(r)?a[r]=(n(o)?o:[o]).concat(s):a[r]=s}return a})}function X(t){var e=t.util,i=t.directive("_component")||t.internalDirectives.component,n=e.extend({},i);e.extend(n,{_isRouterView:!0,bind:function(){var t=this.vm.$route;if(!t)return void k("<router-view> can only be used inside a router-enabled app.");this._isDynamicLiteral=!0,i.bind.call(this);for(var e=void 0,n=this.vm;n;){if(n._routerView){e=n._routerView;break}n=n.$parent}if(e)this.parentView=e,e.childView=this;else{var a=t.router;a._rootView=this}var r=t.router._currentTransition;if(!e&&r.done||e&&e.activated){var o=e?e.depth+1:0;G(this,r,o)}},unbind:function(){this.parentView&&(this.parentView.childView=null),i.unbind.call(this)}}),t.elementDirective("router-view",n)}function z(t){function e(t){return t.protocol===location.protocol&&t.hostname===location.hostname&&t.port===location.port}function i(t,e,i){if(e=e.trim(),e.indexOf(" ")===-1)return void i(t,e);for(var n=e.split(/\s+/),a=0,r=n.length;a<r;a++)i(t,n[a])}var n=t.util,a=n.bind,r=n.isObject,o=n.addClass,s=n.removeClass,c=t.directive("on").priority,l="__vue-router-link-update__",h=0;t.directive("link-active",{priority:9999,bind:function(){for(var t=this,e=String(h++),i=this.el.querySelectorAll("[v-link]"),n=0,a=i.length;n<a;n++){var r=i[n],o=r.getAttribute(l),s=o?o+","+e:e;r.setAttribute(l,s)}this.vm.$on(l,this.cb=function(i,n){i.activeIds.indexOf(e)>-1&&i.updateClasses(n,t.el)})},unbind:function(){this.vm.$off(l,this.cb)}}),t.directive("link",{priority:c-2,bind:function(){var t=this.vm;if(!t.$route)return void k("v-link can only be used inside a router-enabled app.");this.router=t.$route.router,this.unwatch=t.$watch("$route",a(this.onRouteUpdate,this));var e=this.el.getAttribute(l);e&&(this.el.removeAttribute(l),this.activeIds=e.split(",")),"A"===this.el.tagName&&"_blank"===this.el.getAttribute("target")||(this.handler=a(this.onClick,this),this.el.addEventListener("click",this.handler))},update:function(t){this.target=t,r(t)&&(this.append=t.append,this.exact=t.exact,this.prevActiveClass=this.activeClass,this.activeClass=t.activeClass),this.onRouteUpdate(this.vm.$route)},onClick:function(t){if(!(t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented||0!==t.button)){var i=this.target;if(i)t.preventDefault(),this.router.go(i);else{for(var n=t.target;"A"!==n.tagName&&n!==this.el;)n=n.parentNode;if("A"===n.tagName&&e(n)){t.preventDefault();var a=n.pathname;this.router.history.root&&(a=a.replace(this.router.history.rootRE,"")),this.router.go({path:a,replace:i&&i.replace,append:i&&i.append})}}}},onRouteUpdate:function(t){var e=this.router.stringifyPath(this.target);this.path!==e&&(this.path=e,this.updateActiveMatch(),this.updateHref()),this.activeIds?this.vm.$emit(l,this,t.path):this.updateClasses(t.path,this.el)},updateActiveMatch:function(){this.activeRE=this.path&&!this.exact?new RegExp("^"+this.path.replace(/\/$/,"").replace(ot,"").replace(rt,"\\$&")+"(\\/|$)"):null},updateHref:function(){if("A"===this.el.tagName){var t=this.path,e=this.router,i="/"===t.charAt(0),n=t&&("hash"===e.mode||i)?e.history.formatPath(t,this.append):t;n?this.el.href=n:this.el.removeAttribute("href")}},updateClasses:function(t,e){var n=this.activeClass||this.router._linkActiveClass;this.prevActiveClass&&this.prevActiveClass!==n&&i(e,this.prevActiveClass,s);var a=this.path.replace(ot,"");t=t.replace(ot,""),this.exact?a===t||"/"!==a.charAt(a.length-1)&&a===t.replace(at,"")?i(e,n,o):i(e,n,s):this.activeRE&&this.activeRE.test(t)?i(e,n,o):i(e,n,s)},unbind:function(){this.el.removeEventListener("click",this.handler),this.unwatch&&this.unwatch()}})}function R(t,e){var i=e.component;ct.util.isPlainObject(i)&&(i=e.component=ct.extend(i)),"function"!=typeof i&&(e.component=null,k('invalid component for route "'+t+'".'))}var $={};$.classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.prototype={to:function(t,e){var i=this.delegate;if(i&&i.willAddRoute&&(t=i.willAddRoute(this.matcher.target,t)),this.matcher.add(this.path,t),e){if(0===e.length)throw new Error("You must have an argument in the function passed to `to`");this.matcher.addChild(this.path,t,e,this.delegate)}return this}},e.prototype={add:function(t,e){this.routes[t]=e},addChild:function(t,n,a,r){var o=new e(n);this.children[t]=o;var s=i(t,o,r);r&&r.contextEntered&&r.contextEntered(n,s),a(s)}};var E=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],W=new RegExp("(\\"+E.join("|\\")+")","g"),j=!1;l.prototype={eachChar:function(t){for(var e,i=this.string,n=0,a=i.length;n<a;n++)e=i.charAt(n),t({validChars:e})},regex:function(){return this.string.replace(W,"\\$1")},generate:function(){return this.string}},h.prototype={eachChar:function(t){t({invalidChars:"/",repeat:!0})},regex:function(){return"([^/]+)"},generate:function(t){var e=t[this.name];return null==e?":"+this.name:e}},u.prototype={eachChar:function(t){t({invalidChars:"",repeat:!0})},regex:function(){return"(.+)"},generate:function(t){var e=t[this.name];return null==e?":"+this.name:e}},d.prototype={eachChar:function(){},regex:function(){return""},generate:function(){return""}},p.prototype={get:function(t){for(var e=this.nextStates,i=0,n=e.length;i<n;i++){var a=e[i],r=a.charSpec.validChars===t.validChars;if(r=r&&a.charSpec.invalidChars===t.invalidChars)return a}},put:function(t){var e;return(e=this.get(t))?e:(e=new p(t),this.nextStates.push(e),t.repeat&&e.nextStates.push(e),e)},match:function(t){for(var e,i,n,a=this.nextStates,r=[],o=0,s=a.length;o<s;o++)e=a[o],i=e.charSpec,"undefined"!=typeof(n=i.validChars)?n.indexOf(t)!==-1&&r.push(e):"undefined"!=typeof(n=i.invalidChars)&&n.indexOf(t)===-1&&r.push(e);return r}};var N=Object.create||function(t){function e(){}return e.prototype=t,new e};g.prototype=N({splice:Array.prototype.splice,slice:Array.prototype.slice,push:Array.prototype.push,length:0,queryParams:null});var Y=function(){this.rootState=new p,this.names={}};Y.prototype={add:function(t,e){for(var i,n=this.rootState,a="^",r={},o=[],s=[],c=!0,l=0,h=t.length;l<h;l++){var u=t[l],p=[],m=f(u.path,p,r);s=s.concat(m);for(var v=0,g=m.length;v<g;v++){var y=m[v];y instanceof d||(c=!1,n=n.put({validChars:"/"}),a+="/",n=x(n,y),a+=y.regex())}var b={handler:u.handler,names:p};o.push(b)}c&&(n=n.put({validChars:"/"}),a+="/"),n.handlers=o,n.regex=new RegExp(a+"$"),n.specificity=r,(i=e&&e.as)&&(this.names[i]={segments:s,handlers:o})},handlersFor:function(t){var e=this.names[t],i=[];if(!e)throw new Error("There is no route named "+t);for(var n=0,a=e.handlers.length;n<a;n++)i.push(e.handlers[n]);return i},hasRoute:function(t){return!!this.names[t]},generate:function(t,e){var i=this.names[t],n="";if(!i)throw new Error("There is no route named "+t);for(var a=i.segments,r=0,o=a.length;r<o;r++){var s=a[r];s instanceof d||(n+="/",n+=s.generate(e))}return"/"!==n.charAt(0)&&(n="/"+n),e&&e.queryParams&&(n+=this.generateQueryString(e.queryParams)),n},generateQueryString:function(t){var e=[],i=[];for(var n in t)t.hasOwnProperty(n)&&i.push(n);i.sort();for(var a=0,r=i.length;a<r;a++){n=i[a];var o=t[n];if(null!=o){var s=encodeURIComponent(n);if(c(o))for(var l=0,h=o.length;l<h;l++){var u=n+"[]="+encodeURIComponent(o[l]);e.push(u)}else s+="="+encodeURIComponent(o),e.push(s)}}return 0===e.length?"":"?"+e.join("&")},parseQueryString:function(t){for(var e=t.split("&"),i={},n=0;n<e.length;n++){var a,r=e[n].split("="),o=b(r[0]),s=o.length,c=!1;1===r.length?a="true":(s>2&&"[]"===o.slice(s-2)&&(c=!0,o=o.slice(0,s-2),i[o]||(i[o]=[])),a=r[1]?b(r[1]):""),c?i[o].push(a):i[o]=a}return i},recognize:function(t,e){j=e;var i,n,a,r,o=[this.rootState],c={},l=!1;if(r=t.indexOf("?"),r!==-1){var h=t.substr(r+1,t.length);t=t.substr(0,r),h&&(c=this.parseQueryString(h))}if(t=s(t)){for("/"!==t.charAt(0)&&(t="/"+t),i=t.length,i>1&&"/"===t.charAt(i-1)&&(t=t.substr(0,i-1),l=!0),n=0,a=t.length;n<a&&(o=v(o,t.charAt(n)),o.length);n++);var u=[];for(n=0,a=o.length;n<a;n++)o[n].handlers&&u.push(o[n]);o=m(u);var d=u[0];return d&&d.handlers?(l&&"(.+)$"===d.regex.source.slice(-5)&&(t+="/"),y(d,t,c)):void 0}}},Y.prototype.map=r;var U=Y.prototype.generateQueryString,q={},Q=void 0,J=/#.*$/,K=function(){function t(e){var i=e.root,n=e.onChange;$.classCallCheck(this,t),i&&"/"!==i?("/"!==i.charAt(0)&&(i="/"+i),this.root=i.replace(/\/$/,""),this.rootRE=new RegExp("^\\"+this.root)):this.root=null,this.onChange=n;var a=document.querySelector("base");this.base=a&&a.getAttribute("href")}return t.prototype.start=function(){var t=this;this.listener=function(e){var i=location.pathname+location.search;t.root&&(i=i.replace(t.rootRE,"")),t.onChange(i,e&&e.state,location.hash)},window.addEventListener("popstate",this.listener),this.listener()},t.prototype.stop=function(){window.removeEventListener("popstate",this.listener)},t.prototype.go=function(t,e,i){var n=this.formatPath(t,i);e?history.replaceState({},"",n):(history.replaceState({pos:{x:window.pageXOffset,y:window.pageYOffset}},"",location.href),history.pushState({},"",n));var a=t.match(J),r=a&&a[0];t=n.replace(J,"").replace(this.rootRE,""),this.onChange(t,null,r)},t.prototype.formatPath=function(t,e){return"/"===t.charAt(0)?this.root?this.root+"/"+t.replace(/^\//,""):t:w(this.base||location.pathname,t,e)},t}(),Z=function(){function t(e){var i=e.hashbang,n=e.onChange;$.classCallCheck(this,t),this.hashbang=i,this.onChange=n}return t.prototype.start=function(){var t=this;this.listener=function(){var e=location.hash,i=e.replace(/^#!?/,"");"/"!==i.charAt(0)&&(i="/"+i);var n=t.formatPath(i);if(n!==e)return void location.replace(n);var a=location.search&&e.indexOf("?")>-1?"&"+location.search.slice(1):location.search;t.onChange(e.replace(/^#!?/,"")+a)},window.addEventListener("hashchange",this.listener),this.listener()},t.prototype.stop=function(){window.removeEventListener("hashchange",this.listener)},t.prototype.go=function(t,e,i){t=this.formatPath(t,i),e?location.replace(t):location.hash=t},t.prototype.formatPath=function(t,e){var i="/"===t.charAt(0),n="#"+(this.hashbang?"!":"");return i?n+t:n+w(location.hash.replace(/^#!?/,""),t,e)},t}(),tt=function(){function t(e){var i=e.onChange;$.classCallCheck(this,t),this.onChange=i,this.currentPath="/"}return t.prototype.start=function(){this.onChange("/")},t.prototype.stop=function(){},t.prototype.go=function(t,e,i){t=this.currentPath=this.formatPath(t,i),this.onChange(t)},t.prototype.formatPath=function(t,e){return"/"===t.charAt(0)?t:w(this.currentPath,t,e)},t}(),et=function(){function t(e,i,n){$.classCallCheck(this,t),this.router=e,this.to=i,this.from=n,this.next=null,this.aborted=!1,this.done=!1}return t.prototype.abort=function(){if(!this.aborted){this.aborted=!0;var t=!this.from.path&&"/"===this.to.path;t||this.router.replace(this.from.path||"/")}},t.prototype.redirect=function(t){this.aborted||(this.aborted=!0,"string"==typeof t?t=A(t,this.to.params,this.to.query):(t.params=t.params||this.to.params,t.query=t.query||this.to.query),this.router.replace(t))},t.prototype.start=function(t){for(var e=this,i=[],n=this.router._rootView;n;)i.unshift(n),n=n.childView;var a=i.slice().reverse(),r=this.activateQueue=O(this.to.matched).map(function(t){return t.handler}),o=void 0,s=void 0;for(o=0;o<a.length&&S(a[o],r[o],e);o++);o>0&&(s=a.slice(0,o),i=a.slice(o).reverse(),r=r.slice(o)),e.runQueue(i,_,function(){e.runQueue(r,L,function(){e.runQueue(i,M,function(){if(e.router._onTransitionValidated(e),s&&s.forEach(function(t){return H(t,e)}),i.length){var n=i[i.length-1],a=s?s.length:0;G(n,e,a,t)}else t()})})})},t.prototype.runQueue=function(t,e,i){function n(r){r>=t.length?i():e(t[r],a,function(){n(r+1)})}var a=this;n(0)},t.prototype.callHook=function(t,e,i){var n=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],a=n.expectBoolean,r=void 0!==a&&a,o=n.postActivate,s=void 0!==o&&o,c=n.processData,l=n.cleanup,h=this,u=!1,d=function(){l&&l(),h.abort()},f=function(t){if(s?m():d(),t&&!h.router._suppress)throw k("Uncaught error during transition: "),t instanceof Error?t:new Error(t)},p=function(t){try{f(t)}catch(t){setTimeout(function(){throw t},0)}},m=function(){return u?void k("transition.next() should be called only once."):(u=!0,h.aborted?void(l&&l()):void(i&&i()))},v=function(e){"boolean"==typeof e?e?m():d():T(e)?e.then(function(t){t?m():d()},p):t.length||m()},g=function(t){var e=void 0;try{e=c(t)}catch(t){return f(t)}T(e)?e.then(m,p):m()},y={to:h.to,from:h.from,abort:d,next:c?g:m,redirect:function(){h.redirect.apply(h,arguments)}},x=void 0;try{x=t.call(e,y)}catch(t){return f(t)}r?v(x):T(x)?c?x.then(g,p):x.then(m,p):c&&P(x)?g(x):t.length||m()},t.prototype.callHooks=function(t,e,i,n){var a=this;Array.isArray(t)?this.runQueue(t,function(t,i,r){a.aborted||a.callHook(t,e,r,n)},i):this.callHook(t,e,i,n)},t}(),it=/^(component|subRoutes|fullPath)$/,nt=function t(e,i){var n=this;$.classCallCheck(this,t);var a=i._recognizer.recognize(e);a&&([].forEach.call(a,function(t){for(var e in t.handler)it.test(e)||(n[e]=t.handler[e])}),this.query=a.queryParams,this.params=[].reduce.call(a,function(t,e){if(e.params)for(var i in e.params)t[i]=e.params[i];return t},{})),this.path=e,this.matched=a||i._notFoundHandler,Object.defineProperty(this,"router",{enumerable:!1,value:i}),Object.freeze(this)},at=/\/$/,rt=/[-.*+?^${}()|[\]\/\\]/g,ot=/\?.*$/,st={abstract:tt,hash:Z,html5:K},ct=void 0,lt=function(){function t(){var e=this,i=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=i.hashbang,a=void 0===n||n,r=i.abstract,o=void 0!==r&&r,s=i.history,c=void 0!==s&&s,l=i.saveScrollPosition,h=void 0!==l&&l,u=i.transitionOnLoad,d=void 0!==u&&u,f=i.suppressTransitionError,p=void 0!==f&&f,m=i.root,v=void 0===m?null:m,g=i.linkActiveClass,y=void 0===g?"v-link-active":g;if($.classCallCheck(this,t),!t.installed)throw new Error("Please install the Router with Vue.use() before creating an instance.");this.app=null,this._children=[],this._recognizer=new Y,this._guardRecognizer=new Y,this._started=!1,this._startCb=null,this._currentRoute={},this._currentTransition=null,this._previousTransition=null,this._notFoundHandler=null,this._notFoundRedirect=null,this._beforeEachHooks=[],this._afterEachHooks=[],this._rendered=!1,this._transitionOnLoad=d,this._root=v,this._abstract=o,this._hashbang=a;var x="undefined"!=typeof window&&window.history&&window.history.pushState;this._history=c&&x,this._historyFallback=c&&!x;var b=ct.util.inBrowser;this.mode=!b||this._abstract?"abstract":this._history?"html5":"hash";var k=st[this.mode];this.history=new k({root:v,hashbang:this._hashbang,onChange:function(t,i,n){e._match(t,i,n)}}),this._saveScrollPosition=h,this._linkActiveClass=y,this._suppress=p}return t.prototype.map=function(t){for(var e in t)this.on(e,t[e]);return this},t.prototype.on=function(t,e){return"*"===t?this._notFound(e):this._addRoute(t,e,[]),this},t.prototype.redirect=function(t){for(var e in t)this._addRedirect(e,t[e]);return this},t.prototype.alias=function(t){for(var e in t)this._addAlias(e,t[e]);return this},t.prototype.beforeEach=function(t){return this._beforeEachHooks.push(t),this},t.prototype.afterEach=function(t){return this._afterEachHooks.push(t),this},t.prototype.go=function(t){var e=!1,i=!1;ct.util.isObject(t)&&(e=t.replace,i=t.append),t=this.stringifyPath(t),t&&this.history.go(t,e,i)},t.prototype.replace=function(t){"string"==typeof t&&(t={path:t}),t.replace=!0,this.go(t)},t.prototype.start=function(t,e,i){if(this._started)return void k("already started.");if(this._started=!0,this._startCb=i,!this.app){if(!t||!e)throw new Error("Must start vue-router with a component and a root container.");if(t instanceof ct)throw new Error("Must start vue-router with a component, not a Vue instance.");this._appContainer=e;var n=this._appConstructor="function"==typeof t?t:ct.extend(t);n.options.name=n.options.name||"RouterApp"}if(this._historyFallback){var a=window.location,r=new K({root:this._root}),o=r.root?a.pathname.replace(r.rootRE,""):a.pathname;if(o&&"/"!==o)return void a.assign((r.root||"")+"/"+this.history.formatPath(o)+a.search)}this.history.start()},t.prototype.stop=function(){this.history.stop(),this._started=!1},t.prototype.stringifyPath=function(t){var e="";if(t&&"object"==typeof t){if(t.name){var i=ct.util.extend,n=this._currentTransition&&this._currentTransition.to.params,a=t.params||{},r=n?i(i({},n),a):a;e=encodeURI(this._recognizer.generate(t.name,r))}else t.path&&(e=encodeURI(t.path));if(t.query){var o=this._recognizer.generateQueryString(t.query);e+=e.indexOf("?")>-1?"&"+o.slice(1):o}}else e=encodeURI(t?t+"":"");return e},t.prototype._addRoute=function(t,e,i){if(R(t,e),e.path=t,e.fullPath=(i.reduce(function(t,e){return t+e.path},"")+t).replace("//","/"),i.push({path:t,handler:e}),this._recognizer.add(i,{as:e.name}),e.subRoutes)for(var n in e.subRoutes)this._addRoute(n,e.subRoutes[n],i.slice())},t.prototype._notFound=function(t){R("*",t),this._notFoundHandler=[{handler:t}]},t.prototype._addRedirect=function(t,e){"*"===t?this._notFoundRedirect=e:this._addGuard(t,e,this.replace)},t.prototype._addAlias=function(t,e){this._addGuard(t,e,this._match)},t.prototype._addGuard=function(t,e,i){var n=this;this._guardRecognizer.add([{path:t,handler:function(t,a){var r=A(e,t.params,a);i.call(n,r)}}])},t.prototype._checkGuard=function(t){var e=this._guardRecognizer.recognize(t,!0);return e?(e[0].handler(e[0],e.queryParams),!0):this._notFoundRedirect&&(e=this._recognizer.recognize(t),!e)?(this.replace(this._notFoundRedirect),!0):void 0},t.prototype._match=function(t,e,i){var n=this;if(!this._checkGuard(t)){var a=this._currentRoute,r=this._currentTransition;if(r){if(r.to.path===t)return;if(a.path===t)return r.aborted=!0,void(this._currentTransition=this._prevTransition);r.aborted=!0}var o=new nt(t,this),s=new et(this,o,a);this._prevTransition=r,this._currentTransition=s,this.app||!function(){var t=n;n.app=new n._appConstructor({el:n._appContainer,created:function(){this.$router=t},_meta:{$route:o}})}();var c=this._beforeEachHooks,l=function(){s.start(function(){n._postTransition(o,e,i)})};c.length?s.runQueue(c,function(t,e,i){s===n._currentTransition&&s.callHook(t,null,i,{expectBoolean:!0})},l):l(),!this._rendered&&this._startCb&&this._startCb.call(null),this._rendered=!0}},t.prototype._onTransitionValidated=function(t){var e=this._currentRoute=t.to;this.app.$route!==e&&(this.app.$route=e,this._children.forEach(function(t){t.$route=e})),this._afterEachHooks.length&&this._afterEachHooks.forEach(function(e){return e.call(null,{to:t.to,from:t.from})}),this._currentTransition.done=!0},t.prototype._postTransition=function(t,e,i){var n=e&&e.pos;n&&this._saveScrollPosition?ct.nextTick(function(){window.scrollTo(n.x,n.y)}):i&&ct.nextTick(function(){var t=document.getElementById(i.slice(1));t&&window.scrollTo(window.scrollX,t.offsetTop)})},t}();return lt.installed=!1,lt.install=function(t){return lt.installed?void k("already installed."):(ct=t,F(ct),X(ct),z(ct),q.Vue=ct,void(lt.installed=!0))},"undefined"!=typeof window&&window.Vue&&window.Vue.use(lt),lt})}]);
//# sourceMappingURL=app.js.map